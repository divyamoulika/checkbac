/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"3.10.0",{requires:["yui-base"],optional:["dump"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cookie",function(e,t){function h(e){throw new TypeError(e)}function p(e){(!s(e)||e==="")&&h("Cookie name must be a non-empty string.")}function d(e){(!s(e)||e==="")&&h("Subcookie name must be a non-empty string.")}var n=e.Lang,r=e.Object,i=null,s=n.isString,o=n.isObject,u=n.isUndefined,a=n.isFunction,f=encodeURIComponent,l=decodeURIComponent,c=e.config.doc;e.Cookie={_createCookieString:function(e,t,n,r){r=r||{};var i=f(e)+"="+(n?f(t):t),u=r.expires,a=r.path,l=r.domain;return o(r)&&(u instanceof Date&&(i+="; expires="+u.toUTCString()),s(a)&&a!==""&&(i+="; path="+a),s(l)&&l!==""&&(i+="; domain="+l),r.secure===!0&&(i+="; secure")),i},_createCookieHashString:function(e){o(e)||h("Cookie._createCookieHashString(): Argument must be an object.");var t=[];return r.each(e,function(e,n){!a(e)&&!u(e)&&t.push(f(n)+"="+f(String(e)))}),t.join("&")},_parseCookieHash:function(e){var t=e.split("&"),n=i,r={};if(e.length)for(var s=0,o=t.length;s<o;s++)n=t[s].split("="),r[l(n[0])]=l(n[1]);return r},_parseCookieString:function(e,t,n){var r={};if(s(e)&&e.length>0){var o=t===!1?function(e){return e}:l,a=e.split(/;\s/g),f=i,c=i,h=i;for(var p=0,d=a.length;p<d;p++){h=a[p].match(/([^=]+)=/i);if(h instanceof Array)try{f=l(h[1]),c=o(a[p].substring(h[1].length+1))}catch(v){}else f=l(a[p]),c="";!u(n)&&n.reverseCookieLoading?u(r[f])&&(r[f]=c):r[f]=c}}return r},_setDoc:function(e){c=e},exists:function(e){p(e);var t=this._parseCookieString(c.cookie,!0);return t.hasOwnProperty(e)},get:function(e,t){p(e);var n,r,s;return a(t)?(s=t,t={}):o(t)?s=t.converter:t={},n=this._parseCookieString(c.cookie,!t.raw,t),r=n[e],u(r)?i:a(s)?s(r):r},getSub:function(e,t,n,r){var s=this.getSubs(e,r);return s!==i?(d(t),u(s[t])?i:a(n)?n(s[t]):s[t]):i},getSubs:function(e,t){p(e);var n=this._parseCookieString(c.cookie,!1,t);return s(n[e])?this._parseCookieHash(n[e]):i},remove:function(t,n){return p(t),n=e.merge(n||{},{expires:new Date(0)}),this.set(t,"",n)},removeSub:function(e,t,n){p(e),d(t),n=n||{};var r=this.getSubs(e);if(o(r)&&r.hasOwnProperty(t)){delete r[t];if(!n.removeIfEmpty)return this.setSubs(e,r,n);for(var i in r)if(r.hasOwnProperty(i)&&!a(r[i])&&!u(r[i]))return this.setSubs(e,r,n);return this.remove(e,n)}return""},set:function(e,t,n){p(e),u(t)&&h("Cookie.set(): Value cannot be undefined."),n=n||{};var r=this._createCookieString(e,t,!n.raw,n);return c.cookie=r,r},setSub:function(e,t,n,r){p(e),d(t),u(n)&&h("Cookie.setSub(): Subcookie value cannot be undefined.");var i=this.getSubs(e);return o(i)||(i={}),i[t]=n,this.setSubs(e,i,r)},setSubs:function(e,t,n){p(e),o(t)||h("Cookie.setSubs(): Cookie value must be an object.");var r=this._createCookieString(e,this._createCookieHashString(t),!1,n);return c.cookie=r,r}}},"3.10.0",{requires:["yui-base"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("intl-base",function(e,t){var n=/[, ]/;e.mix(e.namespace("Intl"),{lookupBestLang:function(t,r){function a(e){var t;for(t=0;t<r.length;t+=1)if(e.toLowerCase()===r[t].toLowerCase())return r[t]}var i,s,o,u;e.Lang.isString(t)&&(t=t.split(n));for(i=0;i<t.length;i+=1){s=t[i];if(!s||s==="*")continue;while(s.length>0){o=a(s);if(o)return o;u=s.lastIndexOf("-");if(!(u>=0))break;s=s.substring(0,u),u>=2&&s.charAt(u-2)==="-"&&(s=s.substring(0,u-2))}}return""}})},"3.10.0",{requires:["yui-base"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("intl",function(e,t){var n={},r="yuiRootLang",i="yuiActiveLang",s=[];e.mix(e.namespace("Intl"),{_mod:function(e){return n[e]||(n[e]={}),n[e]},setLang:function(e,t){var n=this._mod(e),s=n[i],o=!!n[t];return o&&t!==s&&(n[i]=t,this.fire("intl:langChange",{module:e,prevVal:s,newVal:t===r?"":t})),o},getLang:function(e){var t=this._mod(e)[i];return t===r?"":t},add:function(e,t,n){t=t||r,this._mod(e)[t]=n,this.setLang(e,t)},get:function(t,n,r){var s=this._mod(t),o;return r=r||s[i],o=s[r]||{},n?o[n]:e.merge(o)},getAvailableLangs:function(t){var n=e.Env._loader,r=n&&n.moduleInfo[t],i=r&&r.lang;return i?i.concat():s}}),e.augment(e.Intl,e.EventTarget),e.Intl.publish("intl:langChange",{emitFacade:!0})},"3.10.0",{requires:["intl-base","event-custom"]});
YUI.add("srp-universal-header-uh3",function(a){a.Search.UniversalHeader={init:function(b){a.Get.script(b.js,{onSuccess:function(){a.once("ucs:helpMenuShow",function(){var e=new a.EventTarget();e.publish("ucs:helpMenuItems",{broadcast:2,emitFacade:true});var f=[],c=0;f[c]=[];for(var d=0;d<b.menu.length;d++){if(!b.menu[d].title){c++;f[c]=[]}else{f[c].push({menuText:b.menu[d].title,actionType:"link",url:b.menu[d].link,target:"_top"})}}e.fire("ucs:helpMenuItems",{menuGroups:f})})}})}}},"1.0.0",{requires:["node"]});/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={value:null,setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n)),this._applyParser&&this._applyParser(t)},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),n?(e.empty(),e.remove(P)):(t&&t.remove(P),r||e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this
.get(k),t)},getString:function(e){return this.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"3.10.0",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-local",function(e,t){var n=e.Lang,r=function(){r.superclass.constructor.apply(this,arguments)};e.mix(r,{NAME:"dataSourceLocal",ATTRS:{source:{value:null}},_tId:0,transactions:{},issueCallback:function(e,t){var n=e.on||e.callback,r=n&&n.success,i=e.details[0];i.error=e.error||e.response.error,i.error&&(t.fire("error",i),r=n&&n.failure),r&&r(i)}}),e.extend(r,e.Base,{initializer:function(e){this._initEvents()},_initEvents:function(){this.publish("request",{defaultFn:e.bind("_defRequestFn",this),queuable:!0}),this.publish("data",{defaultFn:e.bind("_defDataFn",this),queuable:!0}),this.publish("response",{defaultFn:e.bind("_defResponseFn",this),queuable:!0})},_defRequestFn:function(e){var t=this.get("source"),r=e.details[0];n.isUndefined(t)&&(r.error=new Error("Local source undefined")),r.data=t,this.fire("data",r)},_defDataFn:function(e){var t=e.data,r=e.meta,i={results:n.isArray(t)?t:[t],meta:r?r:{}},s=e.details[0];s.response=i,this.fire("response",s)},_defResponseFn:function(e){r.issueCallback(e,this)},sendRequest:function(e){var t=r._tId++,n;return e=e||{},n=e.on||e.callback,this.fire("request",{tId:t,request:e.request,on:n,callback:n,cfg:e.cfg||{}}),t}}),e.namespace("DataSource").Local=r},"3.10.0",{requires:["base"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-get",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)};e.DataSource.Get=e.extend(n,e.DataSource.Local,{_defRequestFn:function(t){var n=this.get("source"),r=this.get("get"),i=e.guid().replace(/\-/g,"_"),s=this.get("generateRequestCallback"),o=t.details[0],u=this;return this._last=i,YUI.Env.DataSource.callbacks[i]=function(n){delete YUI.Env.DataSource.callbacks[i],delete e.DataSource.Local.transactions[t.tId];var r=u.get("asyncMode")!=="ignoreStaleResponses"||u._last===i;r&&(o.data=n,u.fire("data",o))},n+=t.request+s.call(this,i),e.DataSource.Local.transactions[t.tId]=r.script(n,{autopurge:!0,onFailure:function(n){delete YUI.Env.DataSource.callbacks[i],delete e.DataSource.Local.transactions[t.tId],o.error=new Error(n.msg||"Script node data failure"),u.fire("data",o)},onTimeout:function(n){delete YUI.Env.DataSource.callbacks[i],delete e.DataSource.Local.transactions[t.tId],o.error=new Error(n.msg||"Script node data timeout"),u.fire("data",o)}}),t.tId},_generateRequest:function(e){return"&"+this.get("scriptCallbackParam")+"=YUI.Env.DataSource.callbacks."+e}},{NAME:"dataSourceGet",ATTRS:{get:{value:e.Get,cloneDefaultValue:!1},asyncMode:{value:"allowAll"},scriptCallbackParam:{value:"callback"},generateRequestCallback:{value:function(){return this._generateRequest.apply(this,arguments)}}}}),YUI.namespace("Env.DataSource.callbacks")},"3.10.0",{requires:["datasource-local","get"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dataschema-base",function(e,t){var n=e.Lang,r={apply:function(e,t){return t},parse:function(t,r){if(r.parser){var i=n.isFunction(r.parser)?r.parser:e.Parsers[r.parser+""];i&&(t=i.call(this,t))}return t}};e.namespace("DataSchema").Base=r,e.namespace("Parsers")},"3.10.0",{requires:["base"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dataschema-json",function(e,t){var n=e.Lang,r=n.isFunction,i=n.isObject,s=n.isArray,o=e.DataSchema.Base,u;u={getPath:function(e){var t=null,n=[],r=0;if(e){e=e.replace(/\[\s*(['"])(.*?)\1\s*\]/g,function(e,t,i){return n[r]=i,".@"+r++}).replace(/\[(\d+)\]/g,function(e,t){return n[r]=parseInt(t,10)|0,".@"+r++}).replace(/^\./,""),t=e.split(".");for(r=t.length-1;r>=0;--r)t[r].charAt(0)==="@"&&(t[r]=n[parseInt(t[r].substr(1),10)])}return t},getLocationValue:function(e,t){var n=0,r=e.length;for(;n<r;n++){if(!(i(t)&&e[n]in t)){t=undefined;break}t=t[e[n]]}return t},apply:function(t,n){var r=n,s={results:[],meta:{}};if(!i(n))try{r=e.JSON.parse(n)}catch(o){return s.error=o,s}return i(r)&&t?(s=u._parseResults.call(this,t,r,s),t.metaFields!==undefined&&(s=u._parseMeta(t.metaFields,r,s))):s.error=new Error("JSON schema parse failure"),s},_parseResults:function(e,t,n){var r=u.getPath,i=u.getLocationValue,o=r(e.resultListLocator),a=o?i(o,t)||t[e.resultListLocator]:t;return s(a)?s(e.resultFields)?n=u._getFieldValues.call(this,e.resultFields,a,n):n.results=a:e.resultListLocator&&(n.results=[],n.error=new Error("JSON results retrieval failure")),n},_getFieldValues:function(t,n,i){var s=[],a=t.length,f,l,c,h,p,d,v,m,g=[],y=[],b=[],w,E;for(f=0;f<a;f++)c=t[f],h=c.key||c,p=c.locator||h,d=u.getPath(p),d&&(d.length===1?g.push({key:h,path:d[0]}):y.push({key:h,path:d,locator:p})),v=r(c.parser)?c.parser:e.Parsers[c.parser+""],v&&b.push({key:h,parser:v});for(f=n.length-1;f>=0;--f){E={},w=n[f];if(w){for(l=y.length-1;l>=0;--l){d=y[l],m=u.getLocationValue(d.path,w);if(m===undefined){m=u.getLocationValue([d.locator],w);if(m!==undefined){g.push({key:d.key,path:d.locator}),y.splice(f,1);continue}}E[d.key]=o.parse.call(this,u.getLocationValue(d.path,w),d)}for(l=g.length-1;l>=0;--l)d=g[l],E[d.key]=o.parse.call(this,w[d.path]===undefined?w[l]:w[d.path],d);for(l=b.length-1;l>=0;--l)h=b[l].key,E[h]=b[l].parser.call(this,E[h]),E[h]===undefined&&(E[h]=null);s[f]=E}}return i.results=s,i},_parseMeta:function(e,t,n){if(i(e)){var r,s;for(r in e)e.hasOwnProperty(r)&&(s=u.getPath(e[r]),s&&t&&(n.meta[r]=u.getLocationValue(s,t)))}else n.error=new Error("JSON meta data retrieval failure");return n}},e.DataSchema.JSON=e.mix(u,o)},"3.10.0",{requires:["dataschema-base","json"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-jsonschema",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)};e.mix(n,{NS:"schema",NAME:"dataSourceJSONSchema",ATTRS:{schema:{}}}),e.extend(n,e.Plugin.Base,{initializer:function(e){this.doBefore("_defDataFn",this._beforeDefDataFn)},_beforeDefDataFn:function(t){var n=t.data&&(t.data.responseText||t.data),r=this.get("schema"),i=t.details[0];return i.response=e.DataSchema.JSON.apply.call(this,r,n)||{meta:{},results:n},this.get("host").fire("response",i),new e.Do.Halt("DataSourceJSONSchema plugin halted _defDataFn")}}),e.namespace("Plugin").DataSourceJSONSchema=n},"3.10.0",{requires:["datasource-local","plugin","dataschema-json"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("jsonp",function(e,t){function r(){this._init.apply(this,arguments)}var n=e.Lang.isFunction;r.prototype={_init:function(t,r){this.url=t,this._requests={},this._timeouts={},r=n(r)?{on:{success:r}}:r||{};var i=r.on||{};i.success||(i.success=this._defaultCallback(t,r)),this._config=e.merge({context:this,args:[],format:this._format,allowCache:!1},r,{on:i})},_defaultCallback:function(){},send:function(){function u(e,r){return n(e)?function(n){var o=!0,u="_requests";r?(++t._timeouts[s],--t._requests[s]):(t._requests[s]||(o=!1,u="_timeouts"),--t[u][s]),!t._requests[s]&&!t._timeouts[s]&&delete YUI.Env.JSONP[s],o&&e.apply(i.context,[n].concat(i.args))}:null}var t=this,r=e.Array(arguments,0,!0),i=t._config,s=t._proxy||e.guid(),o;return i.allowCache&&(t._proxy=s),t._requests[s]===undefined&&(t._requests[s]=0),t._timeouts[s]===undefined&&(t._timeouts[s]=0),t._requests[s]++,r.unshift(t.url,"YUI.Env.JSONP."+s),o=i.format.apply(t,r),i.on.success?(YUI.Env.JSONP[s]=u(i.on.success),e.Get.js(o,{onFailure:u(i.on.failure),onTimeout:u(i.on.timeout,!0),timeout:i.timeout,charset:i.charset,attributes:i.attributes,async:i.async}).execute(),t):t},_format:function(e,t){return e.replace(/\{callback\}/,t)}},e.JSONPRequest=r,e.jsonp=function(t,n){var r=new e.JSONPRequest(t,n);return r.send.apply(r,e.Array(arguments,2,!0))},YUI.Env.JSONP||(YUI.Env.JSONP={})},"3.10.0",{requires:["get","oop"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("escape",function(e,t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},r={html:function(e){return(e+"").replace(/[&<>"'\/`]/g,r._htmlReplacer)},regex:function(e){return(e+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")},_htmlReplacer:function(e){return n[e]}};r.regexp=r.regex,e.Escape=r},"3.10.0",{requires:["yui-base"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("transition",function(e,t){var n="",r="",i=e.config.doc,s="documentElement",o=i[s].style,u="transition",a="transitionProperty",f,l,c,h,p,d,v={},m=["Webkit","Moz"],g={Webkit:"webkitTransitionEnd"},y=function(){this.init.apply(this,arguments)};y._TRANSFORM="transform",y._toCamel=function(e){return e=e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}),e},y._toHyphen=function(e){return e=e.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(e,t,n,r){var i=(t?"-"+t.toLowerCase():"")+n;return r&&(i+="-"+r.toLowerCase()),i}),e},y.SHOW_TRANSITION="fadeIn",y.HIDE_TRANSITION="fadeOut",y.useNative=!1,"transition"in o&&"transitionProperty"in o&&"transitionDuration"in o&&"transitionTimingFunction"in o&&"transitionDelay"in o?(y.useNative=!0,y.supported=!0):e.Array.each(m,function(e){var t=e+"Transition";t in i[s].style&&(n=e,r=y._toHyphen(e)+"-",y.useNative=!0,y.supported=!0,y._VENDOR_PREFIX=e)}),typeof o.transform=="undefined"&&e.Array.each(m,function(e){var t=e+"Transform";typeof o[t]!="undefined"&&(y._TRANSFORM=t)}),n&&(u=n+"Transition",a=n+"TransitionProperty"),f=r+"transition-property",l=r+"transition-duration",c=r+"transition-timing-function",h=r+"transition-delay",p="transitionend",d="on"+n.toLowerCase()+"transitionend",p=g[n]||p,y.fx={},y.toggles={},y._hasEnd={},y._reKeywords=/^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i,e.Node.DOM_EVENTS[p]=1,y.NAME="transition",y.DEFAULT_EASING="ease",y.DEFAULT_DURATION=.5,y.DEFAULT_DELAY=0,y._nodeAttrs={},y.prototype={constructor:y,init:function(e,t){var n=this;return n._node=e,!n._running&&t&&(n._config=t,e._transition=n,n._duration="duration"in t?t.duration:n.constructor.DEFAULT_DURATION,n._delay="delay"in t?t.delay:n.constructor.DEFAULT_DELAY,n._easing=t.easing||n.constructor.DEFAULT_EASING,n._count=0,n._running=!1),n},addProperty:function(t,n){var r=this,i=this._node,s=e.stamp(i),o=e.one(i),u=y._nodeAttrs[s],a,f,l,c,h;u||(u=y._nodeAttrs[s]={}),c=u[t],n&&n.value!==undefined?h=n.value:n!==undefined&&(h=n,n=v),typeof h=="function"&&(h=h.call(o,o)),c&&c.transition&&c.transition!==r&&c.transition._count--,r._count++,l=(typeof n.duration!="undefined"?n.duration:r._duration)||1e-4,u[t]={value:h,duration:l,delay:typeof n.delay!="undefined"?n.delay:r._delay,easing:n.easing||r._easing,transition:r},a=e.DOM.getComputedStyle(i,t),f=typeof h=="string"?a:parseFloat(a),y.useNative&&f===h&&setTimeout(function(){r._onNativeEnd.call(i,{propertyName:t,elapsedTime:l})},l*1e3)},removeProperty:function(t){var n=this,r=y._nodeAttrs[e.stamp(n._node)];r&&r[t]&&(delete r[t],n._count--)},initAttrs:function(t){var n,r=this._node;t.transform&&!t[y._TRANSFORM]&&(t[y._TRANSFORM]=t.transform,delete t.transform);for(n in t)t.hasOwnProperty(n)&&!y._reKeywords.test(n)&&(this.addProperty(n,t[n]),r.style[n]===""&&e.DOM.setStyle(r,n,e.DOM.getComputedStyle(r,n)))},run:function(t){var n=this,r=n._node,i=n._config,s={type:"transition:start",config:i};return n._running||(n._running=!0,i.on&&i.on.start&&i.on.start.call(e.one(r),s),n.initAttrs(n._config),n._callback=t,n._start()),n},_start:function(){this._runNative()},_prepDur:function(e){return e=parseFloat(e)*1e3,e+"ms"},_runNative:function(){var t=this,n=t._node,r=e.stamp(n),i=n.style,s=n.ownerDocument.defaultView.getComputedStyle(n),o=y._nodeAttrs[r],u="",a=s[y._toCamel(f)],d=f+": ",v=l+": ",m=c+": ",g=h+": ",b,w,E;a!=="all"&&(d+=a+",",v+=s[y._toCamel(l)]+",",m+=s[y._toCamel(c)]+",",g+=s[y._toCamel(h)]+",");for(E in o)b=y._toHyphen(E),w=o[E],(w=o[E])&&w.transition===t&&(E in n.style?(v+=t._prepDur(w.duration)+",",g+=t._prepDur(w.delay)+",",m+=w.easing+",",d+=b+",",u+=b+": "+w.value+"; "):this.removeProperty(E));d=d.replace(/,$/,";"),v=v.replace(/,$/,";"),m=m.replace(/,$/,";"),g=g.replace(/,$/,";"),y._hasEnd[r]||(n.addEventListener(p,t._onNativeEnd,""),y._hasEnd[r]=!0),i.cssText+=d+v+m+g+u},_end:function(t){var n=this,r=n._node,i=n._callback,s=n._config,o={type:"transition:end",config:s,elapsedTime:t},u=e.one(r);n._running=!1,n._callback=null,r&&(s.on&&s.on.end?setTimeout(function(){s.on.end.call(u,o),i&&i.call(u,o)},1):i&&setTimeout(function(){i.call(u,o)},1))},_endNative:function(e){var t=this._node,n=t.ownerDocument.defaultView.getComputedStyle(t,"")[y._toCamel(f)];e=y._toHyphen(e),typeof n=="string"&&(n=n.replace(new RegExp("(?:^|,\\s)"+e+",?"),","),n=n.replace(/^,|,$/,""),t.style[u]=n)},_onNativeEnd:function(t){var n=this,r=e.stamp(n),i=t,s=y._toCamel(i.propertyName),o=i.elapsedTime,u=y._nodeAttrs[r],f=u[s],l=f?f.transition:null,c,h;l&&(l.removeProperty(s),l._endNative(s),h=l._config[s],c={type:"propertyEnd",propertyName:s,elapsedTime:o,config:h},h&&h.on&&h.on.end&&h.on.end.call(e.one(n),c),l._count<=0&&(l._end(o),n.style[a]=""))},destroy:function(){var e=this,t=e._node;t&&(t.removeEventListener(p,e._onNativeEnd,!1),e._node=null)}},e.Transition=y,e.TransitionNative=y,e.Node.prototype.transition=function(t,n,r){var i=y._nodeAttrs[e.stamp(this._node)],s=i?i.transition||null:null,o,u;if(typeof t=="string"){typeof n=="function"&&(r=n,n=null),o=y.fx[t];if(n&&typeof n!="boolean"){n=e.clone(n);for(u in o)o.hasOwnProperty(u)&&(u in n||(n[u]=o[u]))}else n=o}else r=n,n=t;return s&&!s._running?s.init(this,n):s=new y(this._node,n),s.run(r),this},e.Node.prototype.show=function(t,n,r){return this._show(),t&&e.Transition&&(typeof t!="string"&&!t.push&&(typeof n=="function"&&(r=n,n=t),t=y.SHOW_TRANSITION),this.transition(t,n,r)),this},e.NodeList.prototype.show=function(t,n,r){var i=this._nodes,s=0,o;while(o=i[s++])e.one(o).show(t,n,r);return this};var b=function(e,t,n){return function(){t&&t.call(e),n&&typeof n=="function"&&n.apply(e._node,arguments)}};e.Node.prototype.hide=function(t,n,r){return t&&e.Transition?(typeof n=="function"&&(r=n,n=null),r=b(this,this._hide,r),typeof t!="string"&&!t.push&&(typeof n=="function"&&(r=n,n=t),t=y.HIDE_TRANSITION),this.transition(t,n,r)):this._hide(),this},e.NodeList.prototype.hide=function(t,n,r){var i=this._nodes,s=0,o;while(o=i[s++])e.one(o).hide(t,n,r);return this},e.NodeList.prototype
.transition=function(t,n){var r=this._nodes,i=0,s;while(s=r[i++])e.one(s).transition(t,n);return this},e.Node.prototype.toggleView=function(t,n,r){this._toggles=this._toggles||[],r=arguments[arguments.length-1];if(typeof t!="string"){n=t,this._toggleView(n,r);return}return typeof n=="function"&&(n=undefined),typeof n=="undefined"&&t in this._toggles&&(n=!this._toggles[t]),n=n?1:0,n?this._show():r=b(this,this._hide,r),this._toggles[t]=n,this.transition(e.Transition.toggles[t][n],r),this},e.NodeList.prototype.toggleView=function(t,n,r){var i=this._nodes,s=0,o;while(o=i[s++])o=e.one(o),o.toggleView.apply(o,arguments);return this},e.mix(y.fx,{fadeOut:{opacity:0,duration:.5,easing:"ease-out"},fadeIn:{opacity:1,duration:.5,easing:"ease-in"},sizeOut:{height:0,width:0,duration:.75,easing:"ease-out"},sizeIn:{height:function(e){return e.get("scrollHeight")+"px"},width:function(e){return e.get("scrollWidth")+"px"},duration:.5,easing:"ease-in",on:{start:function(){var e=this.getStyle("overflow");e!=="hidden"&&(this.setStyle("overflow","hidden"),this._transitionOverflow=e)},end:function(){this._transitionOverflow&&(this.setStyle("overflow",this._transitionOverflow),delete this._transitionOverflow)}}}}),e.mix(y.toggles,{size:["sizeOut","sizeIn"],fade:["fadeOut","fadeIn"]})},"3.10.0",{requires:["node-style"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("template-micro",function(e,t){var n=e.namespace("Template.Micro");n.options={code:/<%([\s\S]+?)%>/g,escapedOutput:/<%=([\s\S]+?)%>/g,rawOutput:/<%==([\s\S]+?)%>/g,stringEscape:/\\|'|\r|\n|\t|\u2028|\u2029/g,stringReplace:{"\\":"\\\\","'":"\\'","\r":"\\r","\n":"\\n","	":"\\t","\u2028":"\\u2028","\u2029":"\\u2029"}},n.compile=function(t,r){var i=[],s="\uffff",o="\ufffe",u;return r=e.merge(n.options,r),u="var $b='', $v=function (v){return v || v === 0 ? v : $b;}, $t='"+t.replace(/\ufffe|\uffff/g,"").replace(r.rawOutput,function(e,t){return o+(i.push("'+\n$v("+t+")+\n'")-1)+s}).replace(r.escapedOutput,function(e,t){return o+(i.push("'+\n$e($v("+t+"))+\n'")-1)+s}).replace(r.code,function(e,t){return o+(i.push("';\n"+t+"\n$t+='")-1)+s}).replace(r.stringEscape,function(e){return r.stringReplace[e]||""}).replace(/\ufffe(\d+)\uffff/g,function(e,t){return i[parseInt(t,10)]}).replace(/\n\$t\+='';\n/g,"\n")+"';\nreturn $t;",r.precompile?"function (Y, $e, data) {\n"+u+"\n}":this.revive(new Function("Y","$e","data",u))},n.precompile=function(e,t){return t||(t={}),t.precompile=!0,this.compile(e,t)},n.render=function(e,t,n){return this.compile(e,n)(t)},n.revive=function(t){return function(n){return n||(n={}),t.call(n,e,e.Escape.html,n)}}},"3.10.0",{requires:["escape"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("stylesheet",function(e,t){function v(t,r){var o,a,f,l={},h,p,m,g,y,b;if(!e.instanceOf(this,v))return new v(t,r);if(t){if(e.Node&&t instanceof e.Node)a=t._node;else if(t.nodeName)a=t;else if(s(t)){if(t&&u[t])return u[t];a=n.getElementById(t.replace(/^#/,d))}if(a&&u[e.stamp(a)])return u[e.stamp(a)]}if(!a||!/^(?:style|link)$/i.test(a.nodeName))a=n.createElement("style"),a.type="text/css";s(t)&&(t.indexOf("{")!=-1?a.styleSheet?a.styleSheet.cssText=t:a.appendChild(n.createTextNode(t)):r||(r=t));if(!a.parentNode||a.parentNode.nodeName.toLowerCase()!=="head")o=(a.ownerDocument||n).getElementsByTagName("head")[0],o.appendChild(a);f=a.sheet||a.styleSheet,h=f&&"cssRules"in f?"cssRules":"rules",m="deleteRule"in f?function(e){f.deleteRule(e)}:function(e){f.removeRule(e)},p="insertRule"in f?function(e,t,n){f.insertRule(e+" {"+t+"}",n)}:function(e,t,n){f.addRule(e,t,n)};for(g=f[h].length-1;g>=0;--g)y=f[h][g],b=y.selectorText,l[b]?(l[b].style.cssText+=";"+y.style.cssText,m(g)):l[b]=y;v.register(e.stamp(a),this),r&&v.register(r,this),e.mix(this,{getId:function(){return e.stamp(a)},enable:function(){return f.disabled=!1,this},disable:function(){return f.disabled=!0,this},isEnabled:function(){return!f.disabled},set:function(e,t){var n=l[e],r=e.split(/\s*,\s*/),i,s;if(r.length>1){for(i=r.length-1;i>=0;--i)this.set(r[i],t);return this}return v.isValidSelector(e)?(n?n.style.cssText=v.toCssText(t,n.style.cssText):(s=f[h].length,t=v.toCssText(t),t&&(p(e,t,s),l[e]=f[h][s])),this):this},unset:function(t,n){var r=l[t],s=t.split(/\s*,\s*/),o=!n,u,a;if(s.length>1){for(a=s.length-1;a>=0;--a)this.unset(s[a],n);return this}if(r){if(!o){n=e.Array(n),i.cssText=r.style.cssText;for(a=n.length-1;a>=0;--a)c(i,n[a]);i.cssText?r.style.cssText=i.cssText:o=!0}if(o){u=f[h];for(a=u.length-1;a>=0;--a)if(u[a]===r){delete l[t],m(a);break}}}return this},getCssText:function(e){var t,n,r;if(s(e))return t=l[e.split(/\s*,\s*/)[0]],t?t.style.cssText:null;n=[];for(r in l)l.hasOwnProperty(r)&&(t=l[r],n.push(t.selectorText+" {"+t.style.cssText+"}"));return n.join("\n")}})}var n=e.config.doc,r=n.createElement("p"),i=r.style,s=e.Lang.isString,o={},u={},a="cssFloat"in i?"cssFloat":"styleFloat",f,l,c,h="opacity",p="float",d="";l=h in i?function(e){e.opacity=d}:function(e){e.filter=d},i.border="1px solid red",i.border=d,c=i.borderLeft?function(e,t){var n;t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a);if(s(e[t]))switch(t){case h:case"filter":l(e);break;case"font":e.font=e.fontStyle=e.fontVariant=e.fontWeight=e.fontSize=e.lineHeight=e.fontFamily=d;break;default:for(n in e)n.indexOf(t)===0&&(e[n]=d)}}:function(e,t){t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a),s(e[t])&&(t===h?l(e):e[t]=d)},f=function(t,s){var o=t.styleFloat||t.cssFloat||t[p],u=e.Lang.trim,f;try{i.cssText=s||d}catch(l){r=n.createElement("p"),i=r.style,i.cssText=s||d}o&&!t[a]&&(t=e.merge(t),delete t.styleFloat,delete t.cssFloat,delete t[p],t[a]=o);for(f in t)if(t.hasOwnProperty(f))try{i[f]=u(t[f])}catch(c){}return i.cssText},e.mix(v,{toCssText:h in i?f:function(t,n){return h in t&&(t=e.merge(t,{filter:"alpha(opacity="+t.opacity*100+")"}),delete t.opacity),f(t,n)},register:function(e,t){return!!(e&&t instanceof v&&!u[e]&&(u[e]=t))},isValidSelector:function(e){var t=!1;return e&&s(e)&&(o.hasOwnProperty(e)||(o[e]=!/\S/.test(e.replace(/\s+|\s*[+~>]\s*/g," ").replace(/([^ ])\[.*?\]/g,"$1").replace(/([^ ])::?[a-z][a-z\-]+[a-z](?:\(.*?\))?/ig,"$1").replace(/(?:^| )[a-z0-6]+/ig," ").replace(/\\./g,d).replace(/[.#]\w[\w\-]*/g,d))),t=o[e]),t}},!0),e.StyleSheet=v},"3.10.0",{requires:["yui-base"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("model",function(e,t){function l(){l.superclass.constructor.apply(this,arguments)}var n=YUI.namespace("Env.Model"),r=e.Lang,i=e.Array,s=e.Object,o="change",u="error",a="load",f="save";e.Model=e.extend(l,e.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(e){this.changed={},this.lastChange={},this.lists=[]},destroy:function(e,t){var n=this;return typeof e=="function"&&(t=e,e=null),n.onceAfter("destroy",function(){function r(r){r||i.each(n.lists.concat(),function(t){t.remove(n,e)}),t&&t.apply(null,arguments)}e&&(e.remove||e["delete"])?n.sync("delete",e,r):r()}),l.superclass.destroy.call(n)},generateClientId:function(){return n.lastId||(n.lastId=0),this.constructor.NAME+"_"+(n.lastId+=1)},getAsHTML:function(t){var n=this.get(t);return e.Escape.html(r.isValue(n)?String(n):"")},getAsURL:function(e){var t=this.get(e);return encodeURIComponent(r.isValue(t)?String(t):"")},isModified:function(){return this.isNew()||!s.isEmpty(this.changed)},isNew:function(){return!r.isValue(this.get("id"))},load:function(e,t){var n=this;return typeof e=="function"&&(t=e,e={}),e||(e={}),n.sync("read",e,function(r,i){var s={options:e,response:i},o;r?(s.error=r,s.src="load",n.fire(u,s)):(n._loadEvent||(n._loadEvent=n.publish(a,{preventable:!1})),o=s.parsed=n._parse(i),n.setAttrs(o,e),n.changed={},n.fire(a,s)),t&&t.apply(null,arguments)}),n},parse:function(t){if(typeof t=="string")try{return e.JSON.parse(t)}catch(n){return this.fire(u,{error:n,response:t,src:"parse"}),null}return t},save:function(e,t){var n=this;return typeof e=="function"&&(t=e,e={}),e||(e={}),n._validate(n.toJSON(),function(r){if(r){t&&t.call(null,r);return}n.sync(n.isNew()?"create":"update",e,function(r,i){var s={options:e,response:i},o;r?(s.error=r,s.src="save",n.fire(u,s)):(n._saveEvent||(n._saveEvent=n.publish(f,{preventable:!1})),i&&(o=s.parsed=n._parse(i),n.setAttrs(o,e)),n.changed={},n.fire(f,s)),t&&t.apply(null,arguments)})}),n},set:function(e,t,n){var r={};return r[e]=t,this.setAttrs(r,n)},setAttrs:function(t,n){var r=this.idAttribute,i,u,a,f,l;n=e.merge(n),l=n._transaction={},r!=="id"&&(t=e.merge(t),s.owns(t,r)?t.id=t[r]:s.owns(t,"id")&&(t[r]=t.id));for(a in t)s.owns(t,a)&&this._setAttr(a,t[a],n);if(!s.isEmpty(l)){i=this.changed,f=this.lastChange={};for(a in l)s.owns(l,a)&&(u=l[a],i[a]=u.newVal,f[a]={newVal:u.newVal,prevVal:u.prevVal,src:u.src||null});n.silent||(this._changeEvent||(this._changeEvent=this.publish(o,{preventable:!1})),n.changed=f,this.fire(o,n))}return this},sync:function(){var e=i(arguments,0,!0).pop();typeof e=="function"&&e()},toJSON:function(){var e=this.getAttrs();return delete e.clientId,delete e.destroyed,delete e.initialized,this.idAttribute!=="id"&&delete e.id,e},undo:function(e,t){var n=this.lastChange,r=this.idAttribute,o={},u;return e||(e=s.keys(n)),i.each(e,function(e){s.owns(n,e)&&(e=e===r?"id":e,u=!0,o[e]=n[e].prevVal)}),u?this.setAttrs(o,t):this},validate:function(e,t){t&&t()},addAttr:function(e,t,n){var i=this.idAttribute,s,o;return i&&e===i&&(s=this._isLazyAttr("id")||this._getAttrCfg("id"),o=t.value===t.defaultValue?null:t.value,r.isValue(o)||(o=s.value===s.defaultValue?null:s.value,r.isValue(o)||(o=r.isValue(t.defaultValue)?t.defaultValue:s.defaultValue)),t.value=o,s.value!==o&&(s.value=o,this._isLazyAttr("id")?this._state.add("id","lazy",s):this._state.add("id","value",o))),l.superclass.addAttr.apply(this,arguments)},_parse:function(e){return this.parse(e)},_validate:function(e,t){function i(i){if(r.isValue(i)){n.fire(u,{attributes:e,error:i,src:"validate"}),t(i);return}t()}var n=this;n.validate.length===1?i(n.validate(e,i)):n.validate(e,i)},_defAttrChangeFn:function(e){var t=e.attrName;this._setAttrVal(t,e.subAttrName,e.prevVal,e.newVal)?(e.newVal=this.get(t),e._transaction&&(e._transaction[t]=e)):e.stopImmediatePropagation()}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.10.0",{requires:["base-build","escape","json-parse"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("model-list",function(e,t){function c(){c.superclass.constructor.apply(this,arguments)}var n=e.Attribute.prototype,r=e.Lang,i=e.Array,s="add",o="create",u="error",a="load",f="remove",l="reset";e.ModelList=e.extend(c,e.Base,{model:e.Model,_isYUIModelList:!0,initializer:function(t){t||(t={});var n=this.model=t.model||this.model;typeof n=="string"&&(this.model=e.Object.getValue(e,n.split(".")),this.model||e.error("ModelList: Model class not found: "+n)),this.publish(s,{defaultFn:this._defAddFn}),this.publish(l,{defaultFn:this._defResetFn}),this.publish(f,{defaultFn:this._defRemoveFn}),this.after("*:idChange",this._afterIdChange),this._clear(),t.items&&this.add(t.items,{silent:!0})},destructor:function(){this._clear()},add:function(t,n){var s=t._isYUIModelList;return s||r.isArray(t)?i.map(s?t.toArray():t,function(t,r){var i=n||{};return"index"in i&&(i=e.merge(i,{index:i.index+r})),this._add(t,i)},this):this._add(t,n)},create:function(t,n,r){var i=this;return typeof n=="function"&&(r=n,n={}),n||(n={}),t._isYUIModel||(t=new this.model(t)),i.fire(o,e.merge(n,{model:t})),t.save(n,function(e){e||i.add(t,n),r&&r.apply(null,arguments)})},each:function(e,t){var n=this._items.concat(),r,i,s;for(r=0,s=n.length;r<s;r++)i=n[r],e.call(t||i,i,r,this);return this},filter:function(e,t){var n=[],r=this._items,i,s,o,u;typeof e=="function"&&(t=e,e={});for(i=0,o=r.length;i<o;++i)s=r[i],t.call(this,s,i,this)&&n.push(s);return e.asList?(u=new this.constructor({model:this.model}),n.length&&u.add(n,{silent:!0}),u):n},get:function(e){return this.attrAdded(e)?n.get.apply(this,arguments):this.invoke("get",e)},getAsHTML:function(t){return this.attrAdded(t)?e.Escape.html(n.get.apply(this,arguments)):this.invoke("getAsHTML",t)},getAsURL:function(e){return this.attrAdded(e)?encodeURIComponent(n.get.apply(this,arguments)):this.invoke("getAsURL",e)},getByClientId:function(e){return this._clientIdMap[e]||null},getById:function(e){return this._idMap[e]||null},invoke:function(e){var t=[this._items,e].concat(i(arguments,1,!0));return i.invoke.apply(i,t)},load:function(e,t){var n=this;return typeof e=="function"&&(t=e,e={}),e||(e={}),this.sync("read",e,function(r,i){var s={options:e,response:i},o;r?(s.error=r,s.src="load",n.fire(u,s)):(n._loadEvent||(n._loadEvent=n.publish(a,{preventable:!1})),o=s.parsed=n._parse(i),n.reset(o,e),n.fire(a,s)),t&&t.apply(null,arguments)}),this},map:function(e,t){return i.map(this._items,e,t)},parse:function(t){if(typeof t=="string")try{return e.JSON.parse(t)||[]}catch(n){return this.fire(u,{error:n,response:t,src:"parse"}),null}return t||[]},remove:function(e,t){var n=e._isYUIModelList;return n||r.isArray(e)?(e=i.map(n?e.toArray():e,function(e){return r.isNumber(e)?this.item(e):e},this),i.map(e,function(e){return this._remove(e,t)},this)):this._remove(e,t)},reset:function(t,n){t||(t=[]),n||(n={});var r=e.merge({src:"reset"},n);return t._isYUIModelList?t=t.toArray():t=i.map(t,function(e){return e._isYUIModel?e:new this.model(e)},this),r.models=t,n.silent?this._defResetFn(r):(this.comparator&&t.sort(e.bind(this._sort,this)),this.fire(l,r)),this},some:function(e,t){var n=this._items.concat(),r,i,s;for(r=0,s=n.length;r<s;r++){i=n[r];if(e.call(t||i,i,r,this))return!0}return!1},sort:function(t){if(!this.comparator)return this;var n=this._items.concat(),r;return t||(t={}),n.sort(e.bind(this._sort,this)),r=e.merge(t,{models:n,src:"sort"}),t.silent?this._defResetFn(r):this.fire(l,r),this},sync:function(){var e=i(arguments,0,!0).pop();typeof e=="function"&&e()},toArray:function(){return this._items.concat()},toJSON:function(){return this.map(function(e){return e.toJSON()})},_add:function(t,n){var i,o;n||(n={}),t._isYUIModel||(t=new this.model(t)),o=t.get("id");if(this._clientIdMap[t.get("clientId")]||r.isValue(o)&&this._idMap[o]){this.fire(u,{error:"Model is already in the list.",model:t,src:"add"});return}return i=e.merge(n,{index:"index"in n?n.index:this._findIndex(t),model:t}),n.silent?this._defAddFn(i):this.fire(s,i),t},_attachList:function(e){e.lists.push(this),e.addTarget(this)},_clear:function(){i.each(this._items,this._detachList,this),this._clientIdMap={},this._idMap={},this._items=[]},_compare:function(e,t){return e<t?-1:e>t?1:0},_detachList:function(e){var t=i.indexOf(e.lists,this);t>-1&&(e.lists.splice(t,1),e.removeTarget(this))},_findIndex:function(e){var t=this._items,n=t.length,r=0,i,s,o;if(!this.comparator||!n)return n;o=this.comparator(e);while(r<n)s=r+n>>1,i=t[s],this._compare(this.comparator(i),o)<0?r=s+1:n=s;return r},_parse:function(e){return this.parse(e)},_remove:function(t,n){var i,s;n||(n={}),r.isNumber(t)?(i=t,t=this.item(i)):i=this.indexOf(t);if(i===-1||!t){this.fire(u,{error:"Model is not in the list.",index:i,model:t,src:"remove"});return}return s=e.merge(n,{index:i,model:t}),n.silent?this._defRemoveFn(s):this.fire(f,s),t},_sort:function(e,t){return this._compare(this.comparator(e),this.comparator(t))},_afterIdChange:function(e){var t=e.newVal,n=e.prevVal,i=e.target;if(r.isValue(n)){if(this._idMap[n]!==i)return;delete this._idMap[n]}else if(this.indexOf(i)===-1)return;r.isValue(t)&&(this._idMap[t]=i)},_defAddFn:function(e){var t=e.model,n=t.get("id");this._clientIdMap[t.get("clientId")]=t,r.isValue(n)&&(this._idMap[n]=t),this._attachList(t),this._items.splice(e.index,0,t)},_defRemoveFn:function(e){var t=e.model,n=t.get("id");this._detachList(t),delete this._clientIdMap[t.get("clientId")],r.isValue(n)&&delete this._idMap[n],this._items.splice(e.index,1)},_defResetFn:function(e){if(e.src==="sort"){this._items=e.models.concat();return}this._clear(),e.models.length&&this.add(e.models,{silent:!0})}},{NAME:"modelList"}),e.augment(c,e.ArrayList)},"3.10.0",{requires:["array-extras","array-invoke","arraylist","base-build","escape","json-parse","model"]});
/*
YUI 3.10.0 (build a03ce0e)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("lazy-model-list",function(e,t){var n=e.Attribute.prototype,r=YUI.namespace("Env.Model"),i=e.Lang,s=e.Array,o="add",u="error",a="reset";e.LazyModelList=e.Base.create("lazyModelList",e.ModelList,[],{initializer:function(){this.after("*:change",this._afterModelChange)},free:function(e){var t;return e?(t=i.isNumber(e)?e:this.indexOf(e),t>=0&&delete this._models[t]):this._models=[],this},get:function(e){return this.attrAdded(e)?n.get.apply(this,arguments):s.map(this._items,function(t){return t[e]})},getAsHTML:function(t){return this.attrAdded(t)?e.Escape.html(n.get.apply(this,arguments)):s.map(this._items,function(n){return e.Escape.html(n[t])})},getAsURL:function(e){return this.attrAdded(e)?encodeURIComponent(n.get.apply(this,arguments)):s.map(this._items,function(t){return encodeURIComponent(t[e])})},indexOf:function(e){return s.indexOf(e&&e._isYUIModel?this._models:this._items,e)},reset:function(t,n){t||(t=[]),n||(n={});var r=e.merge({src:"reset"},n);return t=t._isYUIModelList?t.map(this._modelToObject):s.map(t,this._modelToObject),r.models=t,n.silent?this._defResetFn(r):(this.comparator&&t.sort(e.bind(this._sort,this)),this.fire(a,r)),this},revive:function(e){var t,n,r;if(e||e===0)return this._revive(i.isNumber(e)?e:this.indexOf(e));r=[];for(t=0,n=this._items.length;t<n;t++)r.push(this._revive(t));return r},toJSON:function(){return this.toArray()},_add:function(t,n){var r;n||(n={}),t=this._modelToObject(t),"clientId"in t||(t.clientId=this._generateClientId());if(this._isInList(t)){this.fire(u,{error:"Model is already in the list.",model:t,src:"add"});return}return r=e.merge(n,{index:"index"in n?n.index:this._findIndex(t),model:t}),n.silent?this._defAddFn(r):this.fire(o,r),t},_clear:function(){s.each(this._models,this._detachList,this),this._clientIdMap={},this._idMap={},this._items=[],this._models=[]},_generateClientId:function(){return r.lastId||(r.lastId=0),this.model.NAME+"_"+(r.lastId+=1)},_isInList:function(e){return!!("clientId"in e&&this._clientIdMap[e.clientId]||"id"in e&&this._idMap[e.id])},_modelToObject:function(e){return e._isYUIModel&&(e=e.getAttrs(),delete e.destroyed,delete e.initialized),e},_remove:function(t,n){return t._isYUIModel&&(t=this.indexOf(t)),e.ModelList.prototype._remove.call(this,t,n)},_revive:function(e){var t,n;return e<0?null:(t=this._items[e],t?(n=this._models[e],n||(n=new this.model(t),n._set("clientId",t.clientId),this._attachList(n),this._models[e]=n),n):null)},_afterModelChange:function(e){var t=e.changed,n=this._clientIdMap[e.target.get("clientId")],r;if(n)for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r].newVal)},_defAddFn:function(e){var t=e.model;this._clientIdMap[t.clientId]=t,i.isValue(t.id)&&(this._idMap[t.id]=t),this._items.splice(e.index,0,t)},_defRemoveFn:function(e){var t=e.index,n=e.model,r=this._models[t];delete this._clientIdMap[n.clientId],"id"in n&&delete this._idMap[n.id],r&&this._detachList(r),this._items.splice(t,1),this._models.splice(t,1)}})},"3.10.0",{requires:["model-list"]});
YUI.add("surfer",function(e){var c,b,d=(e.UA.webkit?true:false);time=0,playTimer={timer:false,delay:5000,startDelay:300};EVT_NEXTCLICK="nextClick",EVT_PREVCLICK="prevClick",EVT_ITEMCHANGE="itemChange",EVT_ITEMCHANGED="itemChanged",EVT_READY="ready",EVT_CLOSE="close",EVT_END="end",EVT_PLAY="play",EVT_PAUSE="pause",EVT_RESIZE="resize";function a(f){a.superclass.constructor.apply(this,arguments)}a.ATTRS={nxtNode:{writeOnce:true,setter:e.one,validator:e.Lang.isString},prvNode:{writeOnce:true,setter:e.one,validator:e.Lang.isString},easing:{value:"ease-out"},transitionDuration:{value:300,validator:e.Lang.isNumber},transitionLimit:{value:400,validator:e.Lang.isNumber},datamodel:{value:null},curPos:{value:1,validator:e.Lang.isNumber},disableHistory:{value:true},history:{value:false},fromOverlay:{value:false},fullScreenMode:{value:false},cssResultClass:{value:"card"},titleField:{value:"tit"},urlField:{value:"url"},autoPlayDelay:{value:5000},microTemplate:{writeOnce:true,setter:e.one,validator:e.Lang.isString}};a.NAME="surfer";e.extend(a,e.Widget,{initializer:function(f){var g=this;g.last=false;g.first=false;g._high=0;g._low=0;g.prefetched=[];g._events=[];g._touchSupport="ontouchstart" in e.config.win;g._disableTransition=!g._touchSupport;g._moving=false;g._easing=this.get("easing");g._duration=this.get("transitionDuration");g._nxtNode=this.get("nxtNode");g._prvNode=this.get("prvNode");g._cb=this.get("contentBox");g._bb=this.get("boundingBox");playTimer.delay=this.get("autoPlayDelay");g.cssclass=this.get("cssResultClass");g.current=g.get("curPos");g.previous=g.current;time=this._getTime();g.history=g.get("history");if(!g.history&&!g.get("disableHistory")){if(e.config.win.history&&e.config.win.history.pushState){e.use("history-html5",function(h){g.history=new h.HistoryHTML5({initialState:{index:g.current}})})}}if(this.get("microTemplate")){this.compiled=e.Template.Micro.compile(this.get("microTemplate").getHTML())}else{this.compiled=null}},destructor:function(){this._detachEvents()},renderUI:function(){this._scrollToTop();this._setDims()},bindUI:function(){var f=this;f._bindIO();if(f._touchSupport){f._events.push(e.on("touchmove",function(g){g.halt()},window));f._cb.on("touchstart",f._onTouchStart,f);f._cb.on("touchmove",f._onTouchMove,f);f._cb.on("flick",e.bind(f._onFlick,f))}f._events.push(e.on("orientationchange",f._onResize,e.config.win,f,"orient"));f._events.push(e.on("windowresize",f._onResize,e.config.win,f,"resize"));f._events.push(f.on("fullScreenModeChange",f._onResize,f));f.on("forward",f.forward,f);f.on("backward",f.backward,f);f.on("repaint",f.repaint,f);f._nxtNode.on("click",f._next,f);f._prvNode.on("click",f._prev,f);f._events.push(e.on("key",f._prev,e.config.doc.body,"down:37",f));f._events.push(e.on("key",f._next,e.config.doc.body,"down:39",f));if(!f.get("disableHistory")){f._events.push(e.on("history:change",f._handleHistChange,f))}f._bindCustom()},syncUI:function(){var j=this;j._resizeContents();var f=e.Node.create('<li class="'+j.cssclass+'"></li>'),g=e.Node.create('<li class="'+j.cssclass+'"></li>');if(j._cb.one("li")){var h=j._cb.one("li")}else{var h=e.Node.create('<li class="'+j.cssclass+'"></li>');j._cb.append(h)}h.addClass("current");j._cb.append(f);j._cb.append(g);j._updateUI(this.get("fromOverlay"),this.get("fromOverlay"));j.fire(EVT_READY)},_bindIO:function(){this.io=this.get("datamodel");this._syncBoundaries();this._events.push(this.io.on("data",e.bind(this._onData,this)))},_updateUI:function(p,r){var t=this;var o=t._data(t.current),m=t._data(t.current,1),l=t._data(t.current,-1),j=t.io.offset(t.current,-1),n=t.io.offset(t.current,1);var g=t._cb.one(".current");var k=g.get("nextSibling");if(!k){k=t._cb.all("li."+t.cssclass).item(0)}var f=g.get("previousSibling");if(!f){f=t._cb.all("li."+t.cssclass).item(2)}t.fire(EVT_ITEMCHANGE,{data:o,logPV:r,index:t.current,fromSrp:p,prevIndex:t.previous,node:g,forward:false});t._setItem(o,g,t.current);t._setItemID(t.current,g);if(r){t._updateBrowser(t.current,o)}t.prefetched[t.current]=1;if(m){t._setItem(m,k,n);t._setItemID(n,k);t.prefetched[n]=1;t.last=false}else{t.last=true}t._transOrLeft(k,t.twidth);if(l){t._setItem(l,f,j);t._setItemID(j,f);t.prefetched[j]=1;t.first=false}else{t.first=true;var h=t._data(t.current,2),q=t.io.offset(t.current,2);if(h){t._setItem(h,f,q);t._setItemID(q,f);t.prefetched[q]=1}}t._transOrLeft(f,-1*t.twidth);t._toggleNextPrev();t.fire(EVT_ITEMCHANGED,{data:o,node:g,index:t.current})},_handleHistChange:function(f){if(f.changed.index&&f.changed.index.newVal==-9999){this.fire(EVT_CLOSE);return}if(f.changed.index&&f.changed.index.newVal!=this.current){this._moveTo(f.changed.index.newVal)}},_onData:function(f){this._syncBoundaries();if(!this._moving){if(this.current<this._high){this.last=false;this.fire("repaint",{backward:false,forward:false,resize:false,sync:true})}}this.fire("data",f)},_data:function(g,f){return this.io.item(g,f)},getData:function(f){if(!e.Lang.isValue(f)){f=this.current}return this.io.item(f,0)},_syncBoundaries:function(){var f=this.io._posMap;if(f){this._low=f[0];this._high=f[f.length-1]}else{this._low=0;this._high=this.io._items.length-1}},_transform:function(f){return(d)?"translate3d("+f+", 0, 0)":"translate("+f+",0)"},_transOrLeft:function(g,f){if(!e.UA.ie&&(!e.UA.gecko||e.UA.android)){g.setStyle("transform",this._transform(f+"px"))}else{g.setStyle("left",f+"px")}},_next:function(f){if(f.target.get("nodeName")=="INPUT"){return}f.preventDefault();if(this.get("isPlaying")){this.pause()}this.fire(EVT_NEXTCLICK);this.next()},next:function(){this.fire("forward")},_prev:function(f){if(f.target.get("nodeName")=="INPUT"){return}f.preventDefault();if(this.get("isPlaying")){this.pause()}this.fire(EVT_PREVCLICK);this.prev()},prev:function(){this.fire("backward")},forward:function(){var k=this;if((k.current==k._high)||(!k._disableTransition&&k._moving)){return}var h=k._cb.one(".current"),f=h.get("nextSibling");if(!f){f=k._cb.all("li."+k.cssclass).item(0)}this._restoreCurrent();f.addClass("current");h.removeClass("current");k._moving=true;var g=k._data(k.current,2);k.first=false;if(!g){k.last=true}else{k.last=false}var j=k._data(k.current,1);if(k._touchSupport){k._cb.transition({easing:k._easing,duration:k._disableTransition?0:(k._duration/1000),transform:k._transform(-1*k.twidth+"px")},function(){k.fire("repaint",{backward:false,forward:true,resize:false,sync:false})})}else{k._transOrLeft(k._cb,-1*k.twidth);k.fire("repaint",{backward:false,forward:true,resize:false,sync:false})}},backward:function(){var j=this;if((j.current==j._low)||(!j._disableTransition&&j._moving)){return}var h=e.one(".current"),f=h.get("previousSibling");if(!f){f=j._cb.all("li."+j.cssclass).item(2)}j._moving=true;j._restoreCurrent();f.addClass("current");h.removeClass("current");var g=j._data(j.current,-2);j.last=false;if(!g){j.first=true}else{j.first=false}var k=j._data(j.current,-1);if(j._touchSupport){j._cb.transition({easing:j._easing,duration:j._disableTransition?0:(j._duration/1000),transform:j._transform(j.twidth+"px")},function(){j.fire("repaint",{backward:true,forward:false,resize:false,sync:false})})}else{j._transOrLeft(j._cb,j.twidth);j.fire("repaint",{backward:true,forward:false,resize:false,sync:false})}},_toggleNextPrev:function(){var g=this.current;if(!this._data(g,-1)){this._prvNode.hide()}else{this._prvNode.show()}var f=e.Lang.isNumber(this.io.off)?this.io.off:1;if(g>=(this.io.get("total")-f)){this._nxtNode.hide();this.fire(EVT_END)}else{this._nxtNode.show()}},_getTime:function(){var f=new Date();return f.getTime()},repaint:function(n){var o=this;var g=o._cb.one(".current");var k=g.get("nextSibling");if(!k){k=o._cb.all("li."+o.cssclass).item(0)}var f=g.get("previousSibling");if(!f){f=o._cb.all("li."+o.cssclass).item(2)}if(!n.resize){o._transOrLeft(o._cb,0)}o.previous=o.current;o.current=parseInt(g.getAttribute("data-id"));o._transOrLeft(g,0);var p=o._data(o.current);if(p){if(n.forward||n.backward){o._updateBrowser(o.current,p)}n.resize&&o._syncItem(p,g)}var m=o._data(this.current,1),j=o._data(this.current,-1),h=o.io.offset(o.current,-1),l=o.io.offset(o.current,1);if(f){if((n.backward||n.sync)&&j){o._setItem(j,f,h);o._setItemID(h,f);o.prefetched[h]=1}else{if(n.resize&&j){o._syncItem(j,f)}}o._transOrLeft(f,-1*o.twidth)}if(k){if((n.forward||n.sync)&&m){o._setItem(m,k,l);o._setItemID(l,k);o.prefetched[l]=1}else{if(n.resize&&m){o._syncItem(m,k)}}o._transOrLeft(k,o.twidth)}o._moving=false;if(n.forward||n.backward){o.fire(EVT_ITEMCHANGE,{data:p,logPV:true,index:o.current,fromSrp:false,prevIndex:o.previous,node:g,forward:n.forward})}o._toggleNextPrev()},_onTouchStart:function(f){f=f.touches[0];c=f.pageX;b=f.pageY},_onTouchMove:function(g){if(this._moving){return}g=g.touches[0];if(c<g.pageX){var f=false}else{var f=true}if((f&&this.current==this._high)||(!f&&this.current==this._low)){return}var h=g.pageX-c;this._cb.setStyle("transform",this._transform(h+"px"))},_onFlick:function(g){now=this._getTime();diff=now-time;time=this._getTime();if(diff<this.get("transitionLimit")){this._disableTransition=true}else{this._disableTransition=false}if(this._moving){return}if(g.flick.distance==0&&g.flick.velocity==0){return}if(g.flick.axis=="y"){this._cb.setStyle("transform",this._transform(0));return true}var f=g.flick.distance<0;var h=g.flick.distance>0;if(f&&!this.last){this.fire("forward")}if(h&&!this.first){this.fire("backward")}},_onResize:function(f,g){this.fire(EVT_RESIZE,{src:g});this._scrollToTop();this._setDims();this._resizeContents(g);this.fire("repaint",{backward:false,forward:false,resize:true,sync:false})},_moveTo:function(h,g){var f=this;if(!e.Lang.isValue(g)){g=true}if(f.get("isPlaying")){f.pause()}if(h==f.current){return}f._restoreCurrent();f.previous=f.current;f.current=h;f._updateUI(false,g)},_updateBrowser:function(g,f){if(this.get("disableHistory")){return}var j=f[this.get("titleField")],h=f[this.get("urlField")]||f.fpurl;if(!this.get("fullScreenMode")){this.history&&this.history.addValue("index",g,{title:j,url:h})}e.config.doc.title=this._htmlDecode(j)},_detachEvents:function(f){e.Array.each(this._events||[],function(g){g.detach()},this);this._events=[]},_scrollToTop:function(){if(e.UA.iphone){e.config.win.scrollTo(0,1)}else{if(e.UA.android||e.UA.mobile||(e.UA.ie&&e.UA.ie<=7)){e.config.win.scrollTo(0,0)}}},_setDims:function(){var f=this._bb.get("region");this.width=f.width;this.twidth=f.width;this.height=f.height},play:function(){this._cancelPlayTimer();this.set("isPlaying",true);playTimer.timer=e.later(playTimer.startDelay,this,"_startPlay");this.fire(EVT_PLAY)},_startPlay:function(){this._cancelPlayTimer();this.next();playTimer.timer=e.later(playTimer.delay,this,"next",null,true)},pause:function(){this._cancelPlayTimer();this.set("isPlaying",false);this.fire("repaint",{backward:false,forward:false,resize:true,sync:false});this.fire(EVT_PAUSE)},_cancelPlayTimer:function(){if(playTimer.timer){playTimer.timer.cancel()}},_setItemID:function(g,f){f.setAttribute("data-id",g)},_setItem:function(f,g,h){if(this.compiled){g.setHTML(this.compiled(f))}this._syncItem(f,g)},_htmlDecode:function(f){if(!this.dummyDiv){this.dummyDiv=e.Node.create("<div></div>")}return this.dummyDiv.setContent(f).get("text")},_resizeContents:function(){},_bindCustom:function(){},_restoreCurrent:function(){},_syncItem:function(f,g){}});e.namespace("MMSearch").Surfer=a},"1.0.0",{requires:["widget-base","node","transition","event","json-parse","template-micro"]});YUI.add("surfer-base-plugin",function(b){b.namespace("MMSearch");function a(c){a.superclass.constructor.apply(this,arguments)}a.NAME="SurferBasePlugin";a.NS="sbp";a.ATTRS={};b.extend(a,b.Plugin.Base,{initializer:function(){this.events=[]},destroy:function(){b.each(this.events,function(d,c){if(d){d.detach()}});this.events=[]},_pushEvent:function(c){this.events.push(c)}});b.namespace("MMSearch").SurferBasePlugin=a},"0.0.1",{requires:["event","plugin"]});YUI.add("right-rail",function(b){function a(){a.superclass.constructor.apply(this,arguments)}a.ATTRS={boundingBox:{setter:b.one},contentBox:{setter:b.one},width:{value:290,validator:b.Lang.isNumber},toggleButton:{setter:b.one},mask:{setter:b.one},searchbox:{setter:b.one}};a.NAME="right-rail";a.NS="rrail";b.extend(a,b.MMSearch.SurferBasePlugin,{initializer:function(){this.bb=this.get("boundingBox");this.cb=this.get("contentBox");this.searchbox=this.get("searcbox");this.rrwidth=this.get("width");this._bindUI()},_bindUI:function(){this.onHostEvent("resize",this._onHostResize);this.onHostEvent("itemChange",this._closeRightRail);this._pushEvent(this.get("toggleButton").on("click",this._toggleRightRail,this));this._pushEvent(this.get("mask").on("click",this._closeRightRail,this));this._onHostResize()},_toggleRightRail:function(){if(this.bb.hasClass("open")){this._closeRightRail()}else{this._openRightRail()}},_openRightRail:function(){var c=this;c.bb.setStyle("overflow","hidden");c.bb.one(".card-btns").hide();c.cb.transition({duration:0.2,easing:"ease-in",right:"0px",opacity:1},function(){c.bb.addClass("open")});this.fire("open")},_closeRightRail:function(){var c=this;if(!this.bb.hasClass("open")){return}if(this.searchbox){this.searchbox.blur()}this.bb.removeClass("open");this.cb.transition({duration:0.2,easing:"ease-out",right:"-"+this.rrwidth+"px",opacity:0},function(){c.bb.setStyle("overflow","visible");c.bb.one(".card-btns").show()});this.fire("close")},_onHostResize:function(c){}});b.namespace("MMSearch").RightRailPlugin=a},"1.0.0",{requires:["node","surfer-base-plugin"]});YUI.add("right-rail-reco",function(b){b.namespace("MMSearch");function a(){a.superclass.constructor.apply(this,arguments)}a.NAME="RightRailRecoPlugin";a.NS="rreco";a.ATTRS={url:{value:""},strings:{value:{trendingtopics:"Trending Topics",recommendedtopics:"Recommended Topics",exploretags:"Related Topics"}},searchbox:{setter:b.one},sbclear:{value:"#sbxclr",setter:b.one},boundingNode:{setter:b.one},contentNode:{setter:b.one},hideClass:{value:"sa-hidden"}};b.extend(a,b.MMSearch.SurferBasePlugin,{initializer:function(){this.cb=this.get("contentNode");this.bb=this.get("boundingNode");this.sbclear=this.get("sbclear");this._bindUI();this._fetch()},_bindUI:function(){var c=this.get("searchbox");this._pushEvent(c.on("valueChange",function(d){if(c.get("value")==""){this.sbclear.hide();this.show()}else{this.sbclear.show()}},this));this._pushEvent(c.on("focus",function(d){if(c.get("value")==""){this.show()}},this));this._pushEvent(c.on("clickoutside",function(d){if(d.target!=this.sbclear){this.hide()}},this));this._pushEvent(this.sbclear.on("click",function(d){c.set("value","");this.sbclear.hide();this.show()},this))},_fetch:function(){var c=this.get("url");if(!c){return}b.jsonp(c+"&callback={callback}",{on:{success:function(d){this._build(d)}},context:this})},_build:function(e){var d="";var c=this;b.each(e,function(g,f){d+="<h2>"+c.get("strings")[f]+"</h2><ul>";b.each(g,function(h){d+='<li><a href="'+h.link+'">'+h.key+"</a></li>"});d+="</ul>"});this.cb.set("innerHTML",d)},show:function(){this.bb.removeClass(this.get("hideClass"))},hide:function(){this.bb.addClass(this.get("hideClass"))}});b.namespace("MMSearch").RightRailRecoPlugin=a},"0.0.1",{requires:["node","jsonp","jsonp-url","event-valuechange","event-outside","surfer-base-plugin"]});YUI.add("surfer-util",function(a){a.MMSearch.SurferUtil={beacon:function(c){if(!c){return}var b=new Image();b.src=c+(c.indexOf("?")===-1?"?":"&")+(new Date()).getTime()},buildSearchUrl:function(d,g,e,j){var f=d.get("form"),c=e||f.getAttribute("action"),b=f.all("input,select,textarea"),h=[];if(!j){j={}}b.each(function(n){var m,l;if(n.get("tagName").toLowerCase()==="input"){switch(n.get("type")){case"button":case"image":case"reset":case"submit":return;case"checkbox":case"radio":if(!n.get("checked")){return}break}}m=n.get("name");if(m===d.get("name")){l=g}else{if(!j[m]){l=n.get("value")}}if(l){h.push(encodeURIComponent(m)+"="+encodeURIComponent(l))}});a.each(j,function(m,l){h.push(encodeURIComponent(l)+"="+encodeURIComponent(m))});return c+(c.indexOf("?")===-1?"?":"&")+h.join("&")},highlightAll:function(e,d){var c="(&[^;\\s]*)?(%needles)";var b=function(f,h,g){return h&&!(/\s/).test(g)?f:"<b>{s}</b>".replace(/\{s\}/g,g)};d=a.Lang.isArray(d)?d.concat():[d];for(i=0,len=d.length;i<len;++i){d[i]=a.Escape.regex(a.Escape.html(d[i]))}e=a.Escape.html(e);return e.replace(new RegExp(c.replace("%needles",d.join("|")),"gi"),b)},truncate:function(h,c,d){var e,g,f,b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];h=a.Lang.trim(h);if(c<=0||h.length<=c){return h}f=new RegExp("(\\"+b.join("|\\")+")","g");d=d?d.replace(f,"\\$1").split(/\s+/):[];for(e=0;e<d.length;++e){g=d[e].replace;if(g.length>3){h=h.replace(new RegExp("(?:^|\\s+)"+g+"(?:\\s+)?","gi"),"...");if(h.length<=c){return h}}}return a.Lang.trim(h.substr(0,c-3)).replace(/\.+$/,"")+"..."},isVisible:function(b){if(!b||b.getComputedStyle("display")=="none"||b.getComputedStyle("visibility")=="hidden"){return false}return true}}},"1.0.0",{requires:["node"]});YUI.add("idle-timer",function(g){var d=false,h=-1,b=false,f=g.config.doc,e=30000;function c(j){clearTimeout(h);if(b){if(/visibilitychange/.test(j.type)){a(f.hidden||f.msHidden||f.webkitHidden||f.mozHidden)}else{if(d){a()}}h=setTimeout(a,e)}}function a(j){var k=false;if(typeof j!="undefined"){if(j!=d){d=j;k=true}}else{d=!d;k=true}if(k){g.IdleTimer.fire(d?"idle":"active")}}g.IdleTimer={isRunning:function(){return b},isIdle:function(){return d},start:function(j){b=true;d=false;if(typeof j=="number"){e=j}g.on("mousemove",c,f);g.on("keydown",c,f);g.on("mousedown",c,f);g.on("scroll",c);if(f.addEventListener){f.addEventListener("msvisibilitychange",c,false);f.addEventListener("webkitvisibilitychange",c,false);f.addEventListener("mozvisibilitychange",c,false)}h=setTimeout(a,e)},stop:function(){b=false;clearTimeout(h);g.detach("mousemove",c,f);g.detach("keydown",c,f);g.detach("mousedown",c,f);g.detach("scroll",c);if(f.removeEventListener){f.removeEventListener("msvisibilitychange",c,false);f.removeEventListener("webkitvisibilitychange",c,false);f.removeEventListener("mozvisibilitychange",c,false)}}};g.augment(g.IdleTimer,g.Event.Target)},"0.1",{requires:["event","event-custom"]});YUI.add("idle-timer-plugin",function(a){var g="nodes",d="durationActive",f="durationIdle",c="it_active",b="it_idle",h="timer",j;function e(k){e.superclass.constructor.apply(this,arguments)}e.NAME="IdlePlugin";e.NS="idle";e.ATTRS={timer:{value:2500},durationActive:{value:0.15},durationIdle:{value:0.75},nodes:{}};a.extend(e,a.Plugin.Base,{initializer:function(){j=this.get("host");a.IdleTimer.subscribe("active",this._onActive,this);a.IdleTimer.subscribe("idle",this._onIdle,this);a.IdleTimer.start(this.get(h))},destructor:function(){this._onActive();a.IdleTimer.stop()},reset:function(){a.IdleTimer.stop();a.IdleTimer.start(this.get(h))},_onActive:function(){var k=this.get(g);for(var l=0;l<k.length;l++){var m=k[l];m.node.transition(a.merge(m.active,{duration:this.get(d)}))}j.fire(c)},_onIdle:function(){var k=this.get(g);for(var l=0;l<k.length;l++){var m=k[l];m.node.transition(a.merge(m.idle,{duration:this.get(f)}))}j.fire(b)}});a.namespace("MMSearch").IdlePlugin=e},"0.0.1",{requires:["idle-timer","transition"]});YUI.add("fullscreen",function(c){var b=c.config.doc,a=c.Lang;c.FullScreen={EVT_FULLSCREENCHANGE:"",isActive:function(){return false},request:function(d){},cancel:function(){}};(function(){var d=["webkit","moz"],f="",e=false;if(!a.isUndefined(b.cancelFullScreen)||!a.isUndefined(b.exitFullScreen)){e=true}else{c.Array.each(d,function(g){if(!a.isUndefined(b[g+"CancelFullScreen"])){f=g;e=true}})}if(e){switch(f){case"moz":c.mix(c.FullScreen,{EVT_FULLSCREENCHANGE:"mozfullscreenchange",_attachEvents:function(){b.addEventListener(EVT_FULLSCREENCHANGE,c.bind(this._onChange,this),true)},request:function(g){g.mozRequestFullScreen()},cancel:function(){b.mozCancelFullScreen()},isActive:function(){return b.mozFullScreen}},true);break;case"webkit":c.mix(c.FullScreen,{EVT_FULLSCREENCHANGE:"webkitfullscreenchange",request:function(g){g.webkitRequestFullScreen()},cancel:function(){b.webkitCancelFullScreen()},isActive:function(){return b.webkitIsFullScreen}},true);break;default:c.mix(c.FullScreen,{EVT_FULLSCREENCHANGE:"fullscreenchange",request:function(g){g.requestFullScreen()},cancel:function(){b.exitFullscreen()},isActive:function(){return a.isUndefined(b.fullscreenEnabled)?b.fullScreen:b.fullscreenEnabled}},true);break}}}())},"1.0.0",{requires:["base"]});YUI.add("fullscreen-plugin",function(e){var c="fullscreen",d=e.config.doc,b=e.Lang;function a(f){a.superclass.constructor.apply(this,arguments)}a.NAME="fullScreenPlugin";a.NS="fullscreen";a.ATTRS={node:{value:e.one("body"),validator:e.one},activateNode:{validator:e.one},cancelNode:{validator:e.one},fullScreenActive:{value:false,validator:b.isBoolean}};e.extend(a,e.Plugin.Base,{initializer:function(f){if(e.FullScreen.EVT_FULLSCREENCHANGE){d.addEventListener(e.FullScreen.EVT_FULLSCREENCHANGE,e.bind(this._onStateChange,this),true)}else{this.get("node").on("key",this._onStateChange,"esc",this)}if(this.get("cancelNode")){this.get("activateNode").on("click",this.toggle,this,false);this.get("cancelNode").on("click",this.toggle,this,true)}else{this.get("activateNode").on("click",this.toggle,this)}},_onStateChange:function(){var f=e.FullScreen.isActive();if(f!=this.get("fullScreenActive")){this.set("fullScreenActive",f);this.sync()}},toggle:function(k,j){var h=this.get("node"),g=h.getDOMNode(),f=this.get("fullScreenActive");if(typeof j=="boolean"){f=j}if(!f){e.FullScreen.request(g)}else{e.FullScreen.cancel()}this.set("fullScreenActive",!f);this.sync()},sync:function(){var g=this.get("node"),f=this.get("fullScreenActive");if(f){g.addClass(c)}else{g.removeClass(c)}this.fire("fullScreenChange",{active:f})}});e.namespace("MMSearch").FullScreenPlugin=a},"0.0.1",{requires:["fullscreen","plugin","event-custom"]});YUI.add("surfer-datamodel",function(b){function a(c){a.superclass.constructor.apply(this,arguments)}a.ATTRS={source:{value:null},schema:{},hits:{value:30,validator:b.Lang.isNumber},total:{value:9,setter:function(c){return Math.min(c,this.get("maxItems"))}},maxItems:{value:999,validator:b.Lang.isNumber},buffer:{value:10,validator:b.Lang.isNumber},shouldDedup:{value:true,validator:b.Lang.isBoolean},ddSlottedCount:{value:0,validator:b.Lang.isNumber}};a.NAME="dataModel";b.extend(a,b.LazyModelList,{initializer:function(c){this._offsets={};this._skip=this.get("ddSlottedCount");this.datasource=new b.DataSource.Get({source:this.get("source")});this.datasource.plug({fn:b.Plugin.DataSourceJSONSchema,cfg:this.get("schema")})},item:function(c,d){var f=c;if(!this._offsets[0]){this._send(0);this._offsets[0]=true}if(d){f=this.offset(c,d)}else{var e=(f>this._skip)?f-this._skip:f;if(e){this._preFetch(e)}}return this._items[f]},_preFetch:function(g){var c=this.get("hits"),e=this.get("buffer");var h=Math.ceil(g/c)-1,k=h*c,d=(h+1)*c,j=null,f=true;if((d-g)<e){j=(h+1)*c}else{if((g-k)<e&&h>0){f=false;j=(h-1)*c}}if(j!=null){j+=1;if(!this._offsets[j]){this._send(j);this._offsets[j]=true}}},_send:function(c){this.datasource.sendRequest({request:"&b="+c,callback:{success:b.bind(this._onSuccess,this),failure:function(d){}}})},_onSuccess:function(o){var g=o.response,s=g.meta,m=g.results,r=this._items.length,n=r,f,h=this.get("hits");if(s&&s.first<10&&this.get("shouldDedup")){var l={},j=[],d=b.Lang.isValue(this._items[0].oid)?"oid":"vid",c=0,q=null;if(s.slotted){this._skip+=s.slotted}b.each(this._items,function(e,t){l[e[d].toUpperCase()]=t});b.each(m,function(e){q=l[e[d].toUpperCase()];if(!b.Lang.isValue(q)&&b.Lang.isValue(e.muid)){q=l[e.muid.toUpperCase()]}if(c>=r||!b.Lang.isValue(q)){e.pos=n++;j.push(e)}else{if(b.Lang.isValue(q)){var t=this._items[q].pos;this._items[q]=b.merge(this._items[q],e);this._items[q].pos=t;if(this._items[q].fpurl){this._items[q].fpurl=this._items[q].fpurl.replace("&tt=b","&tt=s")}++c}}},this);m=j;var k=this._items.concat(m)}else{b.each(m,function(e){e.pos=n++});var k=m}this.add(m);var p=s.total;if(s.count<h){p=s.last}this.set("total",p);f={m:s,results:k,total:p,forward:true};if(o.data.ads){f.ads=o.data.ads}this.fire("data",f)},offset:function(c,d){if(!d){d=0}return(c+d)},hasMore:function(){var c=this._items.length,c=(c>this._skip)?c-this._skip:c;if(c<this.get("total")){return true}return false}});b.namespace("MMSearch").DataModel=a},"1.0.0",{requires:["base","lazy-model-list","datasource-get","datasource-jsonschema","dataschema-json"]});YUI.add("surfer-app",function(b){function a(c){a.superclass.constructor.apply(this,arguments)}a.NAME="SurferApp";a.ATTRS={modules:{value:[]}};b.extend(a,b.Panel,{initializer:function(){},destructor:function(){},bindUI:function(){this.on("maskShow",this._syncBB);b.on("orientationchange",this._syncBB,this);b.on("windowresize",this._syncBB,b.config.win,this);b.on("fullScreenModeChange",this._syncBB,this);this.on("maskHide",this._syncBB)},_syncBB:function(){var d=b.DOM.viewportRegion(),f=d.width,c=d.height,e=this.get("boundingBox");if(b.UA.ie&&b.UA.ie<=7){this.get("maskNode").setStyle("width",f+"px")}if(this.get("modal")){f-=parseInt(e.getStyle("marginRight"))+parseInt(e.getStyle("marginLeft"));c-=parseInt(e.getStyle("marginTop"))+parseInt(e.getStyle("marginBottom"))}e.setStyles({width:f+"px",height:c+"px",left:0,top:0})}});b.namespace("MMSearch").SurferApp=a},"3.1.0",{requires:["panel"]});YUI.add("surfer-image",function(d){var a=d.one("body"),b;function c(e){c.superclass.constructor.apply(this,arguments)}c.ATTRS={pvURL:{validator:d.Lang.isString,writeOnce:true},beac:{validator:d.Lang.isArray},itemTemplate:{value:'<div class="holder"><div class="iholder"><img src="<%=data.turlL%>" alt="<%=data.tit%>"/></div><div class="dummy"></div></div>'},ofr:{validator:d.Lang.isString,writeOnce:true},sections:{value:{nxt:".mmnext",prv:".mmprev",info:".info",share:".share",play:".play",pause:".pause",close:".cd-close",fs:".fscr-toggle",srch:".qstext","fp-alsoviewed":".exp-bb",tags:".explore-tags"}},modal:{value:true}};c.NAME="surfer-image";d.extend(c,d.MMSearch.Surfer,{BOUNDING_TEMPLATE:'<div class="surfer"></div>',CONTENT_TEMPLATE:'<ul id="mmimg"></ul>',initializer:function(e){this.beac=this.get("beac");this.compiled=d.Template.Micro.compile(this.get("itemTemplate"));this.isPlaying=false;this.minwidth=600;this.stylesheet=new d.StyleSheet("isyc-surf");b=(d.UA.ie>0&&d.UA.ie<=8)},destructor:function(){},_bindCustom:function(){this.on(EVT_PREVCLICK,function(){this.action="prev"},this);this.on(EVT_NEXTCLICK,function(){this.action="next"},this);this.on(EVT_PLAY,function(){this._sendBeac("play")},this);this.on(EVT_PAUSE,function(){this._sendBeac("pause")},this);this.on("previewClick",function(){this.action="thmb"},this);this.on(EVT_ITEMCHANGE,this._handleItemChange,this)},_sendBeac:function(e){if(!this.beac||typeof this.beac[e]=="undefined"){return}d.MMSearch.SurferUtil.beacon(this.beac[e])},_handleItemChange:function(e){if(e.logPV){this.logPV(e.data,e.fromSrp)}this.action=null},getPVUrl:function(h){var f=[],e=this.get("pvURL")+"&rand="+(d.Lang.now()),g=d.one(".isycwrap");d.each(this.get("sections"),function(i,j){if(d.MMSearch.SurferUtil.isVisible(g.one(i))){f.push(j)}});if(f.length>0){e=e+"&secs="+encodeURIComponent(f.join(","))}if(d.Lang.isValue(h.rurl)){e+="&rurl="+encodeURIComponent(h.rurl)}if(d.Lang.isValue(h.hq)&&h.hq===true){e+="&hq=1"}if(d.Lang.isValue(h.prtnr)){e+="&prtnr="+encodeURIComponent(h.prtnr)}return e},logPV:function(g,f){var e=false;if(!d.Lang.isValue(g)||!this.get("pvURL")){return}if(!f){if(d.Lang.isValue(this.action)){switch(this.action){case"prev":if(d.Lang.isValue(g.bPrvImg)){e=g.bPrvImg}else{this._sendBeac("prev")}break;case"next":if(d.Lang.isValue(g.bNxtImg)){e=g.bNxtImg}else{this._sendBeac("next")}break;case"thmb":if(d.Lang.isValue(g.bCurImg)){e=g.bCurImg}else{this._sendBeac("thmb")}break}}if(!e){e=this.getPVUrl(g)}e+="&nod=1&theater=1"}else{if(this.get("ofr")!="image"){var e=this.getPVUrl(g)+"&theater=1"}else{var e=g.url+"&host="+g.host+"&src=pv&o=js&rand="+(d.Lang.now())}if(g.bURL){d.MMSearch.SurferUtil.beacon(g.bURL)}}if(this.get("ofr")){e+="&ofr="+this.get("ofr")}if(e){d.jsonp(e+"&callback={callback}",{on:{success:function(h){if(h){if(h.assist){this.fire("saData",{sa:h.assist})}if(h.beac){this.beac=d.merge(this.beac,h.beac);if(f&&h.logoUrl){d.one(".isycwrap .mm-hdr a").set("href",h.logoUrl)}}}}},context:this})}},_syncItem:function(e,g){if(g&&(!this.get("isPlaying")||b)){var f=g.one("img");var h=d.MMSearch.ImageSurferUtil.rescaleImage([this.width,this.height],[e.imgW,e.imgH],0,false);f.setStyle("width",h[0][0]);f.setStyle("height",h[0][1])}},_setAdCount:function(){var e=this.io.datasource;var g=d.config.win.innerHeight;var f=0;if(g>739){f=4}else{if(g>651){f=3}else{if(g>563){f=2}else{if(g>475){f=1}}}}e.set("source",e.get("source").replace(/&adcount=\d+/,"").concat("&adcount="+f))},_updateUI:function(){this._setAdCount();c.superclass._updateUI.apply(this,arguments)},_setDims:function(){var e=d.clone(d.DOM.viewportRegion(),true);if(e.width>=1104){this.width=e.width;if(!this.get("fullScreenMode")){this.width-=330}}else{this.width=e.width}if(this.width<this.minwidth){this.width=this.minwidth}this.height=e.height;if(this.get("modal")){this.width-=80;this.height-=80}if(this.width<600){this.width=600}this.twidth=this.width}});d.namespace("MMSearch").ImageSurfer=c},"1.0.0",{requires:["surfer","surfer-util-image","surfer-util","stylesheet"]});YUI.add("surfer-app-image",function(e){var c="hhid",b="#isycdeck .sbxclr",a="#isyc-yschsp";function d(){d.superclass.constructor.apply(this,arguments)}d.NAME="surferAppImage";d.ATTRS={boundingBox:{value:"#isycdeck"},surferNodes:{value:{nxtNode:".isycwrap .mmnext",prvNode:".isycwrap .mmprev"}},datamodel:{value:false},strings:{value:{imagesearch:"Image Search",close:"Close",exitfull:"Exit Fullscreen",viewfull:"View Fullscreen",search:"Search",next:"Next",prev:"Previous",trendingtopics:"Trending Topics",recommendedtopics:"Recommended Topics",exploretags:"Related Topics",ads:"Ads"}},query:{value:""},srpUrl:{value:""},homeUrl:{value:"/"},cssUrl:{value:""},targetNode:{setter:e.one,value:".imgdd ol"},hoverNode:{setter:e.one},nodeToHide:{setter:e.one,value:"#doc"},selector:{value:"li"},innerBox:{value:"#isycdeck .ipod",getter:e.one},surferConfig:{value:{}},modal:{value:true},visible:{value:false},render:{value:true},zIndex:{value:49999},sa:{value:null},buttons:{value:[]},ads:{value:false,validator:e.Lang.isBoolean},hsimp:{value:false},hspart:{value:false}};e.extend(d,e.MMSearch.SurferApp,{initializer:function(){this.sconf=this.get("surferConfig");this.tb=this.get("targetNode");this.saObj=null;if(!this.tb){this._initSurfer()}},bindUI:function(){d.superclass.bindUI.apply(this,arguments);if(this.tb){this._bindOverlay()}},_bindOverlay:function(){if(this.get("cssUrl")&&this.get("cssUrl")!=""){e.Get.css(this.get("cssUrl"))}this.srpTit=e.config.doc.title;var f=this.get("hoverNode");this.nodeToHide=this.get("nodeToHide");this.tb.delegate("click",this._open,this.get("selector"),this);if(f){f.on("click",this._open,this)}this.get("boundingBox").delegate("click",this._close,".cd-close",this);if(this.get("modal")){this.get("maskNode").on("click",this._close,this)}e.on("key",this._close,e.config.doc.body,"down:27",this,"escape")},renderUI:function(){var g=this.get("strings");if(!this.get("innerBox")){var f=e.Node.create(e.Lang.sub(this.INNER_TEMPLATE,{s0:g.close,s1:g.search,s2:g.prev,s3:g.next,s4:g.imagesearch,s5:g.viewfull,s6:g.exitfull,query:this.get("query"),srpUrl:this.get("srpUrl"),homeUrl:this.get("homeUrl"),actionUrl:this.sconf.actionUrl}));this.get("boundingBox").appendChild(f);this._resetSearchBox();this.appendYHSParams("#isycform")}},appendYHSParams:function(h){if(this.get("hsimp")&&this.get("hspart")){var g=e.Node.create('<input type="hidden" name="hsimp" value="'+this.get("hsimp")+'">');var f=e.Node.create('<input type="hidden" name="hspart" value="'+this.get("hspart")+'">');var i=this.get("boundingBox").one(h);i.appendChild(g);i.appendChild(f)}},_initSurfer:function(g){this.get("boundingBox").removeClass("hide");e.one("html").addClass(c);var f=e.merge(this.sconf,{datamodel:this.get("datamodel"),strings:this.get("strings"),modal:this.get("modal")},this.get("surferNodes"));if(e.Lang.isNumber(g)){f=e.merge(f,{curPos:g})}this.surfer=new e.MMSearch.ImageSurfer(f);this.surfer.render("#isycdeck .ipod");this._bindSurfer()},_resetSearchBox:function(){e.one(a).set("value",this._htmlDecode(this.get("query")));e.one(b).show()},_htmlDecode:function(f){if(!this.helperDiv){this.helperDiv=e.Node.create("<div></div>")}return this.helperDiv.setContent(f).get("text")},_open:function(f){var g=0;if(f.currentTarget.all('a[data-force-redirect="true"]').size()){return true}if(f){f.preventDefault();if(f.currentTarget.one("a")){var g=parseInt(f.currentTarget.one("a").getAttribute("data-pos"));if(isNaN(g)){g=0}}}this.yoff=e.config.doc.body.scrollTop||e.config.doc.documentElement.scrollTop;if(this.get("modal")){e.one("html").addClass("mm-modal");this.get("maskNode").addClass("mm-mask");this.show()}else{this.get("nodeToHide").setStyle("visibility","hidden")}this._resetSearchBox();this._initSurfer(g)},_close:function(f,g){if(!this.surfer){return}if(f){f.preventDefault();if(g&&g=="escape"){this.surfer._sendBeac("close_esc")}else{this.surfer._sendBeac("close")}}if(this.get("modal")){e.one("html").removeClass("mm-modal");this.get("maskNode").removeClass("mm-mask");this.hide()}else{this.get("nodeToHide").setStyle("visibility","visible")}this.get("boundingBox").addClass("hide");this.surfer.destroy();this.surfer=null;if(this.get("boundingBox").one(".isyc-surferbb")){this.get("boundingBox").one(".isyc-surferbb").remove(true)}e.one("html").removeClass(c);e.fire("resetDM");e.config.win.scrollTo(0,this.yoff)},_bindSurfer:function(){if(!this.bound){this._bindAssist();this.unplug("rreco");this.plug(e.MMSearch.RightRailRecoPlugin,{strings:this.get("strings"),url:this.sconf.recoUrl,searchbox:a,boundingNode:".isycwrap .trecw",contentNode:".isycwrap .trec-content",sbclear:b});this.bound=true}this.surfer.plug(e.MMSearch.RightRailImagePlugin,{boundingBox:"#isycdeck",contentBox:".isyc-sidebar",toggleButton:".isycwrap .srch-toggle",mask:".isycwrap .card-mask",searchbox:a,width:330});var f=(e.UA.ie&&location.protocol=="https:");this.surfer.plug(e.MMSearch.SurferImageInfoPlugin);!f&&this.surfer.plug(e.MMSearch.SurferImageFetchPlugin);this.surfer.plug(e.MMSearch.SurferImageTransitionPlugin);this.surfer.plug(e.MMSearch.RightRailImagePreviewPlugin);if(this.get("ads")){this.surfer.plug(e.MMSearch.YSMPlugin,{strings:this.get("strings")})}this._bindFullScreen();if(this.get("modal")){if(!(e.UA.ie>0&&e.UA.ie<=7)){this.get("innerBox").on("hover",this._mouseOver,this._mouseOut,this);this.get("innerBox").on("mousemove",this._mouseOver,this)}this._mouseOver()}},_mouseOver:function(){var f=this.get("boundingBox");f.addClass("hovered");this.activeTimer=e.later(8000,this,function(){this._mouseOut()})},_mouseOut:function(){var f=this.get("boundingBox");if(this.activeTimer){this.activeTimer.cancel()}f.removeClass("hovered")},_bindFullScreen:function(){var f=e.one(".isycwrap .fscr-toggle");this.unplug("fullscreen");this.plug(e.MMSearch.FullScreenPlugin,{activateNode:f});var g=this.surfer;this.fullscreen.on("fullScreenChange",e.bind(function(h){g.set("fullScreenMode",h.active);if(h.active){g._sendBeac("view_full");f.set("title",this.get("strings").exitfull);this.surfer.fire("fs_view")}else{g._sendBeac("exit_full");f.set("title",this.get("strings").viewfull);this.surfer.fire("fs_exit")}g._onResize(false,"resize")},this));this.surfer.plug(e.MMSearch.SurferImageFullscreenPlugin,{query:this.get("query")})},_bindAssist:function(){var f=this.get("sa");if(f==null){this.surfer.on("saData",this._initAssist,this)}else{this._initAssist(false)}},_initAssist:function(h){if(h&&h.sa){h.sa.searchBox="#isyc-yschsp";h.sa.hostNodeToAttach="#isyc-sbq-wrap";this.set("sa",h.sa)}var f=this.get("sa");if(f!=null){var g=new e.SEARCHASSIST.CLIENT(f);this.set("saObj",g);this.surfer.fire("saInit",{sao:this.get("saObj")})}},BOUNDING_TEMPLATE:'<div id="isycdeck" class="mmwrap isycwrap hide"></div>',INNER_TEMPLATE:'<div id="isyc-playpod" class="mm-playpod" role="main"><div class="mmpod ipod"><div class="info ehq"><div class="info-panel"><div class="info-attr"></div><div class="isyc-actions"></div></div></div><div class="card-btns"><a class="cd-close btn" href="javascript:void(0)" title="{s0}"></a><button class="fscr-toggle btn" id="isyc-fscr" title="{s5}"></button><button class="srch-toggle btn" title="{s1}"></button></div><div class="mm-nav"><a class="mmprev"  href="#" title="{s2}"></a><a class="mmnext" href="#" title="{s3}"></a></div><div class="card-mask" class="hide"></div></div></div><div class="card-r isyc-sidebar" role="aside"><div class="mm-hdr"><a href="{homeUrl}" class="ylogo"><s class="logo-ico"></s><h1 class="heading">{s4}</h1></a><div class="card-btns"><a class="cd-close btn" href="javascript:void(0)" title="{s0}"> </a></div></div><div class="mmsbx"><form id="isycform" action="{actionUrl}" name="isycform"><input id="isyc-yschsp" class="qstext" type="text" name="p" value="" autocomplete="off"/><input type="hidden" name="fr2" value="sb-top" /><input type="hidden" name="fr" value="" /><input type="hidden" name="ei" value="utf-8" /><input type="submit" id="isyc-sa-search" class="qsb mg" value="" /></form><s class="sbxclr"></s></div><div class="trecw sa-hidden"><div class="trec-content"></div></div><div class="preview sbar"><div class="surfer-preview"><ul></ul></div></div><div id="image-overlay-ysm-east" class="image-overlay-ysm-ads-cntr"></div></div><div style="clear:both;"></div>',CONTENT_TEMPLATE:null});e.namespace("MMSearch").SurferAppImage=d},"3.1.0",{requires:["surfer-app","surfer-image","surfer-datamodel","right-rail-image","surfer-image-info","surfer-image-fetch","surfer-image-transition","fullscreen-plugin","surfer-image-fullscreen","right-rail-preview","search-assist-client","right-rail-reco","idle-timer-plugin","surfer-ysm-plugin"]});YUI.add("surfer-image-info",function(g){var d,c,e,a,f;function b(){b.superclass.constructor.apply(this,arguments)}b.ATTRS={infoNode:{value:".isycwrap .info"},attrNode:{value:".isycwrap .info-attr"},actNode:{value:".isyc-actions"},template:{value:{attr:'<div class="tit-wrap"><em class="title"><span class="tit"><% if(data.tit) { %><%==data.tit%><% } %><% else { %>&nbsp;<% } %></span><span class="more-text"></span></em></div><div class="imginfo"><% if (data.prtnr && data.prtnr.toLowerCase() == "getty") { %><p class="g-attr"><%if (data.by) { %>By <%==data.by%><% } %><%if (data.col){ %> | <%=data.col%><%}%> | <a href="http://gettyimages.com" target="_blank">Getty Images</a><%if (data.timeAgo){ %> | <%==data.timeAgo%><%}%></p><% } %><%if (data.desc){ %><p class="desc"><%if(!data.by){ %><%if(data.timeAgo){ %><em class="time"><%==data.timeAgo%></em> | <%}%><%}%><%==data.desc%></p><%}%><% else{ %><p class="dim"><%=data.imgW%> x <%=data.imgH%><%if (data.imgS) { %> | <%==data.imgS%><%}%></p><%}%></div><%if(data.rhost) {%><a href="<%=data.trurl%>" target="_blank" class="site"><%==data.rhost%></a><%}%><%else{ %>&nbsp;<%}%>',play:'<div class="act ip"><button class="play action-buttons"><s></s><span class="text visually-hidden"><%=data.play%></span></button></div>'}},strings:{value:{play:"play",pause:"pause",more:"more",less:"less"}}};b.NAME="surfer-image-info";b.NS="sii";g.extend(b,g.MMSearch.SurferBasePlugin,{initializer:function(){var h=this;d=this.get("host");a=true;c=g.one(h.get("infoNode"));e=g.one(h.get("attrNode"));actNode=g.one(h.get("actNode"));actNode.set("innerHTML","");f={};h.templates=this.get("template");g.each(h.get("template"),function(j,i){h.templates[i]=g.Template.Micro.compile(j)});h._renderButtonPlay();h._pushEvent(d.on("itemChange",function(i){this._updateAttribution()},this));h._pushEvent(d.on("repaint",function(i){i.sync&&this._updateAttribution()},this));this._updateAttribution()},_updateAttribution:function(){var h=this,i=d.getData();e.set("innerHTML",h.templates.attr(i));if(!a){e.one(".more-text").set("innerHTML",this.get("strings").less)}else{e.one(".more-text").set("innerHTML",this.get("strings").more)}g.on("click",function(j){this._toggleDetail(j)},".more-text",this)},_toggleDetail:function(){c.toggleClass("open");this.details_shown=c.hasClass("open");if(c.hasClass("open")&&parseInt(c.getStyle("height"))==0){c.setStyle("height","auto");var h=c.get("region").height;c.setStyle("height","0px");c.transition({height:h+"px"},function(){c.removeAttribute("style")})}if(this.details_shown){g.one(".prev")&&g.one(".prev").addClass("hidden");g.one(".next")&&g.one(".next").addClass("hidden")}else{g.one(".next")&&g.one(".next").removeClass("hidden");g.one(".prev")&&g.one(".prev").removeClass("hidden")}this._toggleMore();if(g.UA.ie>0&&g.UA.ie<=7){var i=g.one(".info-panel");i&&i.setStyle("visibility","hidden");i&&i.setStyle("visibility","visible")}},_toggleMore:function(){var h=c.one(".more-text");if(c.hasClass("open")){if(h){h.set("innerHTML",this.get("strings").less)}a=false}else{if(h){h.set("innerHTML",this.get("strings").more)}a=true}},_renderButtonPlay:function(){var i=this;var h=g.Node.create(i.templates.play(this.get("strings")));this._pushEvent(h.on("click",this._togglePlay,i));h.appendTo(actNode);f.play={node:h.get("firstChild"),text:h.one(".text")};this._pushEvent(d.on("pause",function(j){f.play.node.toggleClass("active");f.play.text.setContent(this.get("strings").play)},this));this._pushEvent(d.on("play",function(j){f.play.node.toggleClass("active");f.play.text.setContent(this.get("strings").pause)},this));this._pushEvent(g.on("key",function(j){if(j.target._node.nodeName=="INPUT"){return}i._togglePlay()},g.config.doc,"down:80",i))},_togglePlay:function(){if(!d.get("isPlaying")){d.play()}else{d.pause()}}});g.namespace("MMSearch").SurferImageInfoPlugin=b},"1.0.0",{requires:["plugin","surfer-image","surfer-base-plugin"]});YUI.add("surfer-image-fetch",function(c){var b;c.namespace("MMSearch");function a(d){a.superclass.constructor.apply(this,arguments)}a.NAME="SurferImageFetch";a.NS="sfp";a.ATTRS={fetchTime:{value:100},prefetch:{value:10},prefetchImage:{value:"iurl"},prefetchThumbImage:{value:"turlL"}};c.extend(a,c.MMSearch.SurferBasePlugin,{initializer:function(){b=this.get("host");this._fetchImages(false);this._pushEvent(b.on("itemChange",function(d){this._fetchImages(d)},this))},_fetchImages:function(k){if(this.fetchTimer){this.fetchTimer.cancel()}this.fetchTimer=c.later(this.get("fetchTime"),this,function(e){c.each(b._cb.all("li"),function(o,n){var p=o.getAttribute("data-id");var i=b.getData(p);if(i){var m=i[this.get("prefetchImage")];var l=new Image();c.one(l).on("load",function(){if(p==o.getAttribute("data-id")){var q=o.one("img");if(q){q.setAttribute("src",m)}}});l.src=m}},this)});var j=b.current;for(var h=0;h<this.get("prefetch");h++){var g=!k||k.forward?(2+h):(-2-h);var d=b._data(j,g);if(d){var f=new Image();f.src=d[this.get("prefetchThumbImage")]}}}});c.namespace("MMSearch").SurferImageFetchPlugin=a},"0.0.1",{requires:["node","surfer-base-plugin"]});YUI.add("surfer-image-transition",function(e){var b,d,a;e.namespace("MMSearch");function c(f){c.superclass.constructor.apply(this,arguments)}c.NAME="SurferTransitionPlugin";c.NS="strp";c.ATTRS={};e.extend(c,e.MMSearch.SurferBasePlugin,{initializer:function(){b=this.get("host");this._pushEvent(b.on("itemChange",function(f){this._transition(f)},this));a=(e.UA.ie>0&&e.UA.ie<=8)},_transition:function(j){if(!b.get("isPlaying")||a){return}var h=j.node;var f=j.data;var i=b._cb.get("region");var g=[i.width,i.height];var k=[parseInt(f.imgW),parseInt(f.imgH)];var l=e.MMSearch.ImageSurferUtil.rescaleImage(g,k,0,false);img=h.one("img");img.transition({duration:2,easing:"ease-out",delay:1,width:l[0][0]+"px",height:l[0][1]+"px"})}});e.namespace("MMSearch").SurferImageTransitionPlugin=c},"0.0.1",{requires:["node","surfer-util-image","surfer-base-plugin"]});YUI.add("right-rail-image",function(b){function a(){a.superclass.constructor.apply(this,arguments)}a.ATTRS={};a.NAME="right-rail-image";a.NS="rraili";b.extend(a,b.MMSearch.RightRailPlugin,{initializer:function(){this._events=[];this._bindSA(false);this.onHostEvent("saInit",this._bindSA)},destructor:function(){b.Array.each(this._events||[],function(c){c.detach()},this);this._events=[]},_bindSA:function(f){if(f&&f.sao){this.set("sao",f.sao)}var c=this,d=c.get("sao");if(d!=null){c._events.push(d.on("search-assist-tray-click-outside",function(){this.get("sao").get("saFormWrapper").removeClass("tray-open")},c));c._events.push(d.on("search-assist-tray-showing",function(){this.get("sao").get("saFormWrapper").addClass("tray-open");b.one(".isyc-sidebar").setStyle("overflowY","hidden")},c))}},_onHostResize:function(c){this._closeRightRail();this.bb.one(".card-btns").show();this._resetRightRail();for(var d=0;d<3;d++){b.later(200,this,function(){this._resetRightRail()})}},_resetRightRail:function(){if(b.DOM.viewportRegion().width<1104){this.bb.addClass("narrow");this.cb.setStyles({right:"-"+this.rrwidth+"px",opacity:0})}else{this.bb.removeClass("narrow").setStyle("overflow","visible");this.cb.setStyles({right:0,opacity:1})}}});b.namespace("MMSearch").RightRailImagePlugin=a},"1.0.0",{requires:["right-rail"]});YUI.add("right-rail-preview",function(b){b.namespace("MMSearch");function a(c){a.superclass.constructor.apply(this,arguments)}a.NAME="RightRailPreviewPlugin";a.NS="spp";a.ATTRS={scrollableNode:{value:".isycwrap .preview"},listSelector:{value:".isycwrap .preview ul"},nodeSelector:{value:'.isycwrap .preview li[data-id="{index}"]'},itemsSelector:{value:"li"},selectedClass:{value:"isyc-preview-sel"},itemsPerRow:{value:4},itemHeight:{value:76},html:{value:""},lookAhead:{value:30},dataAttribute:{value:"data-id"},itemTemplate:{value:'<li data-id="<%=data.pos%>"><div class="pholder"><a href="javascipt:void(0)"><img width="<%=data.thmRW%>" height="<%=data.thmRH%>" style="<%=data.thmRM%>" alt="" class="l" data-src="<%=data.turlL%>"></a></div></li>'}};b.extend(a,b.MMSearch.SurferBasePlugin,{initializer:function(){this.host=this.get("host");this.list=b.one(this.get("listSelector"));this.scrollableNode=b.one(this.get("scrollableNode"));this.template=b.Template.Micro.compile(this.get("itemTemplate"));this.io=this.host.get("datamodel");this.items=b.all(this.get("listSelector")+" "+this.get("itemsSelector"));this._pushEvent(b.delegate("click",function(d){d.preventDefault();var c=parseInt(d.currentTarget.getAttribute(this.get("dataAttribute")));this.host.fire("previewClick");this.host._moveTo(c)},this.get("listSelector"),this.get("itemsSelector"),this));this.scrollableNode.plug(b.MMSearch.LazyLoadPlugin,{parent:"li",selector:"l",hostContainer:true,bottom:2});if(!this.items.item(0)){this._createPreview()}this._pushEvent(this.host.on("itemChange",function(c){this.updateSelected(c)},this));this._pushEvent(this.host.on("data",function(c){this.updatePreview(c);this.updateSelected(c)},this));this.updateSelected()},_createPreview:function(){var g=this.host._low,c=this.host._high;for(var e=g;e<=c;e++){var f=this.host.io._items[e];if(f){var d=this.template(f);this.list.append(d)}}},destructor:function(){this._cleanPreview()},_cleanPreview:function(){this.list.setHTML("")},updateSelected:function(i){this.items.refresh();var f=this.host.current;var d=b.Lang.sub(this.get("nodeSelector"),{index:f});var h=b.one(d);if(h){this.items.refresh();var g=this.items.indexOf(h);var j=Math.floor(g/this.get("itemsPerRow"));var k=(b.UA.ie&&b.UA.ie<=7)?(this.get("itemHeight")-4):this.get("itemHeight");var c=j*k;this.scrollableNode.set("scrollTop",c);this.items.removeClass(this.get("selectedClass"));h.addClass(this.get("selectedClass"))}this.scrollableNode.fire("refresh")},updatePreview:function(d){if(d.m.first==1){this.items.refresh();var c=this.items.getDOMNodes().length;if(c){d.results=d.results.slice(c)}}var f=b.one(b.config.doc.createDocumentFragment());b.each(d.results,function(h,g){var e=this.template(h);f.append(e)},this);if(d.forward){this.list.append(f)}else{this.list.prepend(f)}this.scrollableNode.fire("refresh")}});b.namespace("MMSearch").RightRailImagePreviewPlugin=a},"0.0.1",{requires:["node","template-micro","lazy-load-plugin","surfer-base-plugin"]});YUI.add("surfer-ysm-plugin",function(b){b.namespace("MMSearch");function a(c){a.superclass.constructor.apply(this,arguments)}a.NAME="YSMPlugin";a.NS="ysm";a.ATTRS={container:{value:".image-overlay-ysm-ads-cntr",getter:b.one},strings:{value:{ads:"Ads"}}};b.extend(a,b.MMSearch.SurferBasePlugin,{initializer:function(){this._host=this.get("host");this._sideBar=this._host.rraili.get("contentBox");this._preview=this._sideBar.one(".preview");this._bindUI();this._setAdCount()},_getAdCount:function(){var c=this._sideBar.get("offsetHeight")-this._preview.get("offsetTop")-this._preview.get("offsetHeight")-parseInt(this._preview.getStyle("marginTop"))-5-27;if(b.UA.ie&&b.UA.ie==8){c-=60}return Math.floor(c/100)},_setAdCount:function(){var c=this._host.io.datasource;c.set("source",c.get("source").replace(/&adcount=\d+/,"").concat("&adcount="+this._getAdCount()))},_renderUI:function(e){if(!b.Lang.isValue(e)){return false}var d=e;var e=d.results;var c=this.get("strings");var g=d.meta;var f='<div class="f-ads-img"><h2><a href="'+g.sUrl+'">'+c.ads+"</a></h2><ul>";b.Array.each(e,function(h){f+='<li><a class="title" href="'+h.url+'" target="_new">'+h.title+'</a><address><a class="site" href="'+h.site_url+'" target="_new">'+h.site+'</a></address><p><a class="desc" href="'+h.desc_url+'" target="_new">'+h.desc+"</a></p></li>"});f+="</ul></div>";if(!this.get("container")){this._sideBar.append(f);this.set("container",".image-overlay-ysm-ads-cntr")}else{this.get("container").replace(f)}},_bindUI:function(){this._pushEvent(this._host.on("data",function(c){this._renderUI(c.ads)},this));this._pushEvent(this._host.on("resize",this._setAdCount,this))}});b.namespace("MMSearch").YSMPlugin=a},"1.0.0",{requires:["node","surfer-base-plugin"]});YUI.add("lazy-load-plugin",function(b){function a(c){a.superclass.constructor.apply(this,arguments)}a.NAME="LazyLoadPlugin";a.NS="lazy_load_plugin";a.ATTRS={parent:{value:""},selector:{value:"process"},hostContainer:{value:false},top:{value:0},right:{value:0},bottom:{value:0},left:{value:0},run:{value:true},onload:{value:false}};b.extend(a,b.Plugin.Base,{initializer:function(d){var c=this;if(this.get("onload")){b.on("load",function(){c.attachEvents();c.process()},window)}else{if(this.get("run")){c.attachEvents();c.process()}else{c.attachEvents()}}},attachEvents:function(){var c=this;this.get("host").on("scroll",function(){c.process()});this.get("host").on("refresh",function(){c.process()});b.Global.on("heightChanged",function(){c.process()});b.on("resize",function(){c.process()});b.on("scroll",function(){c.process()})},process:function(){var d=b.one(this.get("host"));if(d){var c=d.all("."+this.get("selector"));if(c){c.each(this.processImage,this)}}},processImage:function(g,h){var e=g;var k=this.get("parent");if(k){e=g.ancestor(k)}var j=e.get("region");var m=this.get("hostContainer")?this.get("host").get("region"):e.get("viewportRegion");var d=m.bottom+j.height*this.get("bottom");var l=m.right+j.width*this.get("right");var i=m.top-j.height*this.get("top");var f=m.left-j.width*this.get("left");if((j.top<=d&&j.top>=i&&j.left<=l&&j.left>=f)||(j.bottom<=d&&j.bottom>=i&&j.right<=l&&j.right>=f)){var c=g.getAttribute("data-src");if(c){g.setAttribute("src",c);g.removeAttribute("data-src");g.removeClass(this.get("selector"))}}}});b.namespace("MMSearch").LazyLoadPlugin=a},"1.0.0",{requires:["plugin","base","node-base"]});YUI.add("surfer-util-image",function(a){a.MMSearch.ImageSurferUtil={rescaleImage:function(c,e,h,g){var k=1;var f=[];var j=e;var h=h||0;var b=a.Lang.isArray(h)?[]:0;if(g){if((j[0]>=j[1])&&(j[1]>=c[1])){f=[1,0]}else{if(j[1]>=j[0]&&j[0]>=c[0]){f=[0,1]}}if(f.length){k=(c[f[0]]/e[f[0]]);j[f[0]]=c[f[0]];j[f[1]]=e[f[1]]*k;if(a.Lang.isArray(h)){for(var d=0;d<2;d++){b[d]=Math.ceil(h[d]*k)}}else{b=Math.ceil(h*k)}}}else{if(j[0]>c[0]&&j[1]>c[1]){if(j[0]>j[1]){f=[0,1]}else{f=[1,0]}}else{if(j[1]>c[1]){f=[1,0]}else{if(j[0]>c[0]){f=[0,1]}}}if(f.length){k=(c[f[0]]/e[f[0]]);j[f[0]]=c[f[0]];j[f[1]]=e[f[1]]*k;f=[]}if(j[1]>c[1]){f=[1,0]}else{if(j[0]>c[0]){f=[0,1]}}if(f.length){k=(c[f[0]]/e[f[0]]);j[f[0]]=c[f[0]];j[f[1]]=e[f[1]]*k;f=[]}}return[[Math.ceil(j[0]),Math.ceil(j[1])],b]}}},"1.0.0",{requires:["node"]});YUI.add("surfer-image-fullscreen",function(d){var c,a;d.namespace("MMSearch");function b(e){b.superclass.constructor.apply(this,arguments)}b.NAME="SurferFullscreenPlugin";b.NS="sfsp";b.ATTRS={fs:{value:{fsInfo:'<div class="fs-info"><div class="fs-attr"><p class="fs-tit" title="<%==data.tit%>"><%==data.tit%></p><%if (data.site){%><span class="sep"> | </span><span class="site"><%=data.site%></span><%}%></div><p class="fs-result-sum"><%=data.fs_search_results%></p></div><div style="clear:both;"></div>',fsSearchResults:'Search results: <%=data.index%>/<%=data.totApprox%> for "<%==data.query%>"'}},query:{value:""}};d.extend(b,d.MMSearch.SurferBasePlugin,{initializer:function(){c=this.get("host");this._pushEvent(c.on("it_active",function(f){this._itHide()},this));this._pushEvent(c.on("it_idle",function(f){this._itUpdate()},this));this._pushEvent(c.on("itemChange",function(f){this._itUpdate()},this))},_fsShow:function(){c.plug(d.MMSearch.IdlePlugin,{nodes:[{node:c._prvNode,idle:{width:"0px"},active:{width:"54px"}},{node:c._nxtNode,idle:{width:"0px"},active:{width:"54px"}},{node:d.one(".isycwrap .info"),idle:{height:"0"},active:{height:"auto"}},{node:d.one(".isycwrap .fscr-toggle"),idle:{width:"0",height:"0"},active:{width:"30px",height:"30px"}}]})},_fsHide:function(){c.unplug("idle")},_itUpdate:function(){var g=c.getData();var e={tit:g.tit,site:g.rhost,index:c.current+1,totApprox:(c.io.get("total")>=999)?"999+":c.io.get("total"),query:this.get("query")};e.fs_search_results=d.Template.Micro.compile(this.get("fs").fsSearchResults)(e);var f=d.Template.Micro.compile(this.get("fs").fsInfo)(e);var h=c._bb.one(".fs-info");if(h){h.set("innerHTML",f)}else{var i=d.Node.create(f);c._bb.appendChild(i)}},_itHide:function(){var e=c._bb.one(".fs-info");if(e){c._bb.removeChild(e)}}});d.namespace("MMSearch").SurferImageFullscreenPlugin=b},"0.0.1",{requires:["node","template-micro","idle-timer-plugin","surfer-base-plugin"]});